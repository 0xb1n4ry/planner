/* GoogleBackend.c generated by valac 0.40.11, the Vala compiler
 * generated from GoogleBackend.vala, do not modify */

/* -*- Mode: vala; indent-tabs-mode: nil; tab-width: 4 -*-*/
/*-
 * Copyright (c) 2013 Maya Developers (https://launchpad.net/maya)
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Library General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Library General Public License for more details.
 *
 * You should have received a copy of the GNU Library General Public
 * License along with this library; if not, write to the
 * Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 * Boston, MA 02110-1301 USA.
 *
 * Authored by: Corentin NoÃ«l <tintou@mailoo.org>
 */


#include <glib.h>
#include <glib-object.h>
#include <gmodule.h>
#include "elementary-calendar.h"
#include <stdlib.h>
#include <string.h>
#include <glib/gi18n-lib.h>
#include <libedataserver/libedataserver.h>
#include <gee.h>
#include <gtk/gtk.h>
#include <libsoup/soup.h>


#define MAYA_TYPE_GOOGLE_BACKEND (maya_google_backend_get_type ())
#define MAYA_GOOGLE_BACKEND(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAYA_TYPE_GOOGLE_BACKEND, MayaGoogleBackend))
#define MAYA_GOOGLE_BACKEND_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAYA_TYPE_GOOGLE_BACKEND, MayaGoogleBackendClass))
#define MAYA_IS_GOOGLE_BACKEND(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAYA_TYPE_GOOGLE_BACKEND))
#define MAYA_IS_GOOGLE_BACKEND_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAYA_TYPE_GOOGLE_BACKEND))
#define MAYA_GOOGLE_BACKEND_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAYA_TYPE_GOOGLE_BACKEND, MayaGoogleBackendClass))

typedef struct _MayaGoogleBackend MayaGoogleBackend;
typedef struct _MayaGoogleBackendClass MayaGoogleBackendClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
typedef struct _MayaGoogleBackendPrivate MayaGoogleBackendPrivate;
enum  {
	MAYA_GOOGLE_BACKEND_0_PROPERTY,
	MAYA_GOOGLE_BACKEND_NUM_PROPERTIES
};
static GParamSpec* maya_google_backend_properties[MAYA_GOOGLE_BACKEND_NUM_PROPERTIES];
#define _g_free0(var) (var = (g_free (var), NULL))
#define __vala_SoupURI_free0(var) ((var == NULL) ? NULL : (var = (_vala_SoupURI_free (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))

struct _MayaGoogleBackend {
	GObject parent_instance;
	MayaGoogleBackendPrivate * priv;
};

struct _MayaGoogleBackendClass {
	GObjectClass parent_class;
};


extern MayaBackend* backend;
MayaBackend* backend = NULL;
static gpointer maya_google_backend_parent_class = NULL;
static MayaBackendIface * maya_google_backend_maya_backend_parent_iface = NULL;

MayaBackend* get_backend (GModule* module);
GType maya_google_backend_get_type (void) G_GNUC_CONST;
MayaGoogleBackend* maya_google_backend_new (void);
MayaGoogleBackend* maya_google_backend_construct (GType object_type);
static gchar* maya_google_backend_real_get_name (MayaBackend* base);
static gchar* maya_google_backend_real_get_uid (MayaBackend* base);
static GeeCollection* maya_google_backend_real_get_new_calendar_widget (MayaBackend* base,
                                                                 ESource* to_edit);
static void maya_google_backend_real_add_new_calendar (MayaBackend* base,
                                                const gchar* name,
                                                const gchar* color,
                                                gboolean set_default,
                                                GeeCollection* widgets);
static void _vala_SoupURI_free (SoupURI* self);
static void _g_object_unref0_ (gpointer var);
static inline void _g_list_free__g_object_unref0_ (GList* self);
static void maya_google_backend_real_modify_calendar (MayaBackend* base,
                                               const gchar* name,
                                               const gchar* color,
                                               gboolean set_default,
                                               GeeCollection* widgets,
                                               ESource* source);


MayaBackend*
get_backend (GModule* module)
{
	MayaBackend* result = NULL;
	MayaGoogleBackend* b = NULL;
	MayaGoogleBackend* _tmp0_;
#line 23 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	g_return_val_if_fail (module != NULL, NULL);
#line 24 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	g_debug ("GoogleBackend.vala:24: Activating Google Backend");
#line 25 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	_tmp0_ = maya_google_backend_new ();
#line 25 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	b = _tmp0_;
#line 26 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	g_object_ref ((GObject*) b);
#line 27 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	result = (MayaBackend*) b;
#line 27 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	return result;
#line 120 "GoogleBackend.c"
}


static gpointer
_g_object_ref0 (gpointer self)
{
#line 34 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	return self ? g_object_ref (self) : NULL;
#line 129 "GoogleBackend.c"
}


MayaGoogleBackend*
maya_google_backend_construct (GType object_type)
{
	MayaGoogleBackend * self = NULL;
	MayaBackend* _tmp0_;
#line 33 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	self = (MayaGoogleBackend*) g_object_new (object_type, NULL);
#line 34 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	_tmp0_ = _g_object_ref0 ((MayaBackend*) self);
#line 34 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	_g_object_unref0 (backend);
#line 34 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	backend = _tmp0_;
#line 33 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	return self;
#line 148 "GoogleBackend.c"
}


MayaGoogleBackend*
maya_google_backend_new (void)
{
#line 33 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	return maya_google_backend_construct (MAYA_TYPE_GOOGLE_BACKEND);
#line 157 "GoogleBackend.c"
}


static gchar*
maya_google_backend_real_get_name (MayaBackend* base)
{
	MayaGoogleBackend * self;
	gchar* result = NULL;
	gchar* _tmp0_;
#line 37 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	self = (MayaGoogleBackend*) base;
#line 38 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	_tmp0_ = g_strdup (_ ("Google"));
#line 38 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	result = _tmp0_;
#line 38 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	return result;
#line 175 "GoogleBackend.c"
}


static gchar*
maya_google_backend_real_get_uid (MayaBackend* base)
{
	MayaGoogleBackend * self;
	gchar* result = NULL;
	gchar* _tmp0_;
#line 41 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	self = (MayaGoogleBackend*) base;
#line 42 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	_tmp0_ = g_strdup ("google-stub");
#line 42 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	result = _tmp0_;
#line 42 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	return result;
#line 193 "GoogleBackend.c"
}


static GeeCollection*
maya_google_backend_real_get_new_calendar_widget (MayaBackend* base,
                                                  ESource* to_edit)
{
	MayaGoogleBackend * self;
	GeeCollection* result = NULL;
	GeeLinkedList* collection = NULL;
	GeeLinkedList* _tmp0_;
	gboolean keep_copy = FALSE;
	GeeLinkedList* _tmp6_;
	gboolean _tmp7_;
	MayaPlacementWidget* _tmp8_;
	MayaPlacementWidget* _tmp9_;
	gchar* user = NULL;
	gchar* _tmp10_;
	GeeLinkedList* _tmp17_;
	const gchar* _tmp18_;
	GeeLinkedList* _tmp19_;
	GeeLinkedList* _tmp20_;
#line 45 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	self = (MayaGoogleBackend*) base;
#line 46 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	_tmp0_ = gee_linked_list_new (MAYA_TYPE_PLACEMENT_WIDGET, (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, NULL, NULL, NULL);
#line 46 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	collection = _tmp0_;
#line 48 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	keep_copy = FALSE;
#line 49 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	if (to_edit != NULL) {
#line 226 "GoogleBackend.c"
		ESourceOffline* source_offline = NULL;
		ESourceExtension* _tmp1_;
		ESourceOffline* _tmp2_;
		ESourceOffline* _tmp3_;
		gboolean _tmp4_;
		gboolean _tmp5_;
#line 50 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp1_ = e_source_get_extension (to_edit, E_SOURCE_EXTENSION_OFFLINE);
#line 50 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp2_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, e_source_offline_get_type (), ESourceOffline));
#line 50 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		source_offline = _tmp2_;
#line 51 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp3_ = source_offline;
#line 51 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp4_ = e_source_offline_get_stay_synchronized (_tmp3_);
#line 51 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp5_ = _tmp4_;
#line 51 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		keep_copy = _tmp5_;
#line 49 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_g_object_unref0 (source_offline);
#line 249 "GoogleBackend.c"
	}
#line 53 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	_tmp6_ = collection;
#line 53 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	_tmp7_ = keep_copy;
#line 53 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	_tmp8_ = maya_default_placement_widgets_get_keep_copy (3, _tmp7_);
#line 53 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	_tmp9_ = _tmp8_;
#line 53 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	gee_abstract_collection_add ((GeeAbstractCollection*) _tmp6_, _tmp9_);
#line 53 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	_g_object_unref0 (_tmp9_);
#line 55 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	_tmp10_ = g_strdup ("");
#line 55 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	user = _tmp10_;
#line 56 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	if (to_edit != NULL) {
#line 269 "GoogleBackend.c"
		ESourceAuthentication* auth = NULL;
		ESourceExtension* _tmp11_;
		ESourceAuthentication* _tmp12_;
		ESourceAuthentication* _tmp13_;
		const gchar* _tmp14_;
		const gchar* _tmp15_;
		gchar* _tmp16_;
#line 57 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp11_ = e_source_get_extension (to_edit, E_SOURCE_EXTENSION_AUTHENTICATION);
#line 57 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp12_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp11_, e_source_authentication_get_type (), ESourceAuthentication));
#line 57 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		auth = _tmp12_;
#line 58 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp13_ = auth;
#line 58 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp14_ = e_source_authentication_get_user (_tmp13_);
#line 58 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp15_ = _tmp14_;
#line 58 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp16_ = g_strdup (_tmp15_);
#line 58 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_g_free0 (user);
#line 58 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		user = _tmp16_;
#line 56 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_g_object_unref0 (auth);
#line 297 "GoogleBackend.c"
	}
#line 61 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	_tmp17_ = collection;
#line 61 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	_tmp18_ = user;
#line 61 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	_tmp19_ = maya_default_placement_widgets_get_user (4, TRUE, _tmp18_, _ ("user.name or user.name@gmail.com"));
#line 61 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	_tmp20_ = _tmp19_;
#line 61 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	gee_collection_add_all ((GeeCollection*) _tmp17_, (GeeCollection*) _tmp20_);
#line 61 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	_g_object_unref0 (_tmp20_);
#line 63 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	result = (GeeCollection*) collection;
#line 63 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	_g_free0 (user);
#line 63 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	return result;
#line 317 "GoogleBackend.c"
}


static gboolean
string_contains (const gchar* self,
                 const gchar* needle)
{
	gboolean result = FALSE;
	gchar* _tmp0_;
#line 1473 "/app/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, FALSE);
#line 1473 "/app/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (needle != NULL, FALSE);
#line 1474 "/app/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp0_ = strstr ((gchar*) self, (gchar*) needle);
#line 1474 "/app/share/vala-0.40/vapi/glib-2.0.vapi"
	result = _tmp0_ != NULL;
#line 1474 "/app/share/vala-0.40/vapi/glib-2.0.vapi"
	return result;
#line 337 "GoogleBackend.c"
}


static void
_vala_SoupURI_free (SoupURI* self)
{
#line 92 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	g_boxed_free (soup_uri_get_type (), self);
#line 346 "GoogleBackend.c"
}


static void
_g_object_unref0_ (gpointer var)
{
#line 103 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	(var == NULL) ? NULL : (var = (g_object_unref (var), NULL));
#line 355 "GoogleBackend.c"
}


static inline void
_g_list_free__g_object_unref0_ (GList* self)
{
#line 103 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	g_list_free_full (self, (GDestroyNotify) _g_object_unref0_);
#line 364 "GoogleBackend.c"
}


static void
maya_google_backend_real_add_new_calendar (MayaBackend* base,
                                           const gchar* name,
                                           const gchar* color,
                                           gboolean set_default,
                                           GeeCollection* widgets)
{
	MayaGoogleBackend * self;
	GError * _inner_error_ = NULL;
#line 66 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	self = (MayaGoogleBackend*) base;
#line 66 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	g_return_if_fail (name != NULL);
#line 66 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	g_return_if_fail (color != NULL);
#line 66 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	g_return_if_fail (widgets != NULL);
#line 385 "GoogleBackend.c"
	{
		ESource* new_source = NULL;
		ESource* _tmp0_;
		ESource* _tmp1_;
		ESource* _tmp2_;
		gchar* _tmp3_;
		gchar* _tmp4_;
		ESourceCalendar* cal = NULL;
		ESource* _tmp5_;
		ESourceExtension* _tmp6_;
		ESourceCalendar* _tmp7_;
		ESourceCalendar* _tmp8_;
		ESourceCalendar* _tmp9_;
		ESourceWebdav* webdav = NULL;
		ESource* _tmp10_;
		ESourceExtension* _tmp11_;
		ESourceWebdav* _tmp12_;
		ESourceOffline* offline = NULL;
		ESource* _tmp13_;
		ESourceExtension* _tmp14_;
		ESourceOffline* _tmp15_;
		ESourceAuthentication* auth = NULL;
		ESource* _tmp16_;
		ESourceExtension* _tmp17_;
		ESourceAuthentication* _tmp18_;
		MayaModelCalendarModel* calmodel = NULL;
		MayaModelCalendarModel* _tmp56_;
		ESourceRegistry* registry = NULL;
		MayaModelCalendarModel* _tmp57_;
		ESourceRegistry* _tmp58_;
		ESourceRegistry* _tmp59_;
		ESourceRegistry* _tmp60_;
		GList* list = NULL;
		ESource* _tmp61_;
		ESource* _tmp62_;
		ESourceRegistry* _tmp63_;
		GList* _tmp64_;
		MayaModelCalendarModel* _tmp65_;
		ESource* _tmp66_;
#line 68 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp0_ = e_source_new (NULL, NULL, &_inner_error_);
#line 68 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		new_source = _tmp0_;
#line 68 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 431 "GoogleBackend.c"
			goto __catch0_g_error;
		}
#line 69 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp1_ = new_source;
#line 69 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		e_source_set_display_name (_tmp1_, name);
#line 70 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp2_ = new_source;
#line 70 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp3_ = maya_backend_get_uid ((MayaBackend*) self);
#line 70 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp4_ = _tmp3_;
#line 70 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		e_source_set_parent (_tmp2_, _tmp4_);
#line 70 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_g_free0 (_tmp4_);
#line 71 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp5_ = new_source;
#line 71 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp6_ = e_source_get_extension (_tmp5_, E_SOURCE_EXTENSION_CALENDAR);
#line 71 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp7_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp6_, e_source_calendar_get_type (), ESourceCalendar));
#line 71 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		cal = _tmp7_;
#line 72 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp8_ = cal;
#line 72 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		e_source_selectable_set_color ((ESourceSelectable*) _tmp8_, color);
#line 73 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp9_ = cal;
#line 73 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		e_source_backend_set_backend_name ((ESourceBackend*) _tmp9_, "caldav");
#line 74 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp10_ = new_source;
#line 74 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp11_ = e_source_get_extension (_tmp10_, E_SOURCE_EXTENSION_WEBDAV_BACKEND);
#line 74 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp12_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp11_, e_source_webdav_get_type (), ESourceWebdav));
#line 74 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		webdav = _tmp12_;
#line 75 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp13_ = new_source;
#line 75 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp14_ = e_source_get_extension (_tmp13_, E_SOURCE_EXTENSION_OFFLINE);
#line 75 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp15_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp14_, e_source_offline_get_type (), ESourceOffline));
#line 75 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		offline = _tmp15_;
#line 76 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp16_ = new_source;
#line 76 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp17_ = e_source_get_extension (_tmp16_, E_SOURCE_EXTENSION_AUTHENTICATION);
#line 76 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp18_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp17_, e_source_authentication_get_type (), ESourceAuthentication));
#line 76 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		auth = _tmp18_;
#line 488 "GoogleBackend.c"
		{
			GeeIterator* _widget_it = NULL;
			GeeIterator* _tmp19_;
#line 77 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			_tmp19_ = gee_iterable_iterator ((GeeIterable*) widgets);
#line 77 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			_widget_it = _tmp19_;
#line 77 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			while (TRUE) {
#line 498 "GoogleBackend.c"
				GeeIterator* _tmp20_;
				MayaPlacementWidget* widget = NULL;
				GeeIterator* _tmp21_;
				gpointer _tmp22_;
				MayaPlacementWidget* _tmp23_;
				const gchar* _tmp24_;
				const gchar* _tmp25_;
				GQuark _tmp27_ = 0U;
#line 78 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				static GQuark _tmp26_label0 = 0;
#line 78 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				static GQuark _tmp26_label1 = 0;
#line 77 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_tmp20_ = _widget_it;
#line 77 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				if (!gee_iterator_next (_tmp20_)) {
#line 77 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
					break;
#line 517 "GoogleBackend.c"
				}
#line 77 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_tmp21_ = _widget_it;
#line 77 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_tmp22_ = gee_iterator_get (_tmp21_);
#line 77 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				widget = (MayaPlacementWidget*) _tmp22_;
#line 78 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_tmp23_ = widget;
#line 78 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_tmp24_ = _tmp23_->ref_name;
#line 78 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_tmp25_ = _tmp24_;
#line 78 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_tmp27_ = (NULL == _tmp25_) ? 0 : g_quark_from_string (_tmp25_);
#line 78 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				if (_tmp27_ == ((0 != _tmp26_label0) ? _tmp26_label0 : (_tmp26_label0 = g_quark_from_static_string ("user_entry")))) {
#line 78 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
					switch (0) {
#line 537 "GoogleBackend.c"
						default:
						{
							gchar* decoded_user = NULL;
							MayaPlacementWidget* _tmp28_;
							GtkWidget* _tmp29_;
							const gchar* _tmp30_;
							const gchar* _tmp31_;
							gchar* _tmp32_;
							gboolean _tmp33_ = FALSE;
							const gchar* _tmp34_;
							ESourceAuthentication* _tmp38_;
							const gchar* _tmp39_;
							SoupURI* soup_uri = NULL;
							SoupURI* _tmp40_;
							SoupURI* _tmp41_;
							SoupURI* _tmp42_;
							SoupURI* _tmp43_;
							const gchar* _tmp44_;
							SoupURI* _tmp45_;
							const gchar* _tmp46_;
							gchar* _tmp47_;
							gchar* _tmp48_;
							ESourceWebdav* _tmp49_;
							SoupURI* _tmp50_;
#line 80 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp28_ = widget;
#line 80 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp29_ = _tmp28_->widget;
#line 80 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp30_ = gtk_entry_get_text (G_TYPE_CHECK_INSTANCE_CAST (_tmp29_, gtk_entry_get_type (), GtkEntry));
#line 80 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp31_ = _tmp30_;
#line 80 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp32_ = g_strdup (_tmp31_);
#line 80 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							decoded_user = _tmp32_;
#line 81 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp34_ = decoded_user;
#line 81 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							if (!string_contains (_tmp34_, "@")) {
#line 578 "GoogleBackend.c"
								const gchar* _tmp35_;
#line 81 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
								_tmp35_ = decoded_user;
#line 81 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
								_tmp33_ = !string_contains (_tmp35_, "%40");
#line 584 "GoogleBackend.c"
							} else {
#line 81 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
								_tmp33_ = FALSE;
#line 588 "GoogleBackend.c"
							}
#line 81 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							if (_tmp33_) {
#line 592 "GoogleBackend.c"
								const gchar* _tmp36_;
								gchar* _tmp37_;
#line 82 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
								_tmp36_ = decoded_user;
#line 82 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
								_tmp37_ = g_strdup_printf ("%s@gmail.com", _tmp36_);
#line 82 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
								_g_free0 (decoded_user);
#line 82 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
								decoded_user = _tmp37_;
#line 603 "GoogleBackend.c"
							}
#line 85 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp38_ = auth;
#line 85 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp39_ = decoded_user;
#line 85 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							e_source_authentication_set_user (_tmp38_, _tmp39_);
#line 86 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp40_ = soup_uri_new (NULL);
#line 86 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							soup_uri = _tmp40_;
#line 87 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp41_ = soup_uri;
#line 87 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							soup_uri_set_host (_tmp41_, "www.google.com");
#line 88 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp42_ = soup_uri;
#line 88 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							soup_uri_set_scheme (_tmp42_, "https");
#line 89 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp43_ = soup_uri;
#line 89 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp44_ = decoded_user;
#line 89 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							soup_uri_set_user (_tmp43_, _tmp44_);
#line 90 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp45_ = soup_uri;
#line 90 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp46_ = decoded_user;
#line 90 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp47_ = g_strdup_printf ("/calendar/dav/%s/events", _tmp46_);
#line 90 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp48_ = _tmp47_;
#line 90 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							soup_uri_set_path (_tmp45_, _tmp48_);
#line 90 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_g_free0 (_tmp48_);
#line 91 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp49_ = webdav;
#line 91 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp50_ = soup_uri;
#line 91 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							g_object_set (_tmp49_, "soup-uri", _tmp50_, NULL);
#line 92 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							__vala_SoupURI_free0 (soup_uri);
#line 92 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_g_free0 (decoded_user);
#line 92 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							break;
#line 653 "GoogleBackend.c"
						}
					}
				} else if (_tmp27_ == ((0 != _tmp26_label1) ? _tmp26_label1 : (_tmp26_label1 = g_quark_from_static_string ("keep_copy")))) {
#line 78 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
					switch (0) {
#line 659 "GoogleBackend.c"
						default:
						{
							ESourceOffline* _tmp51_;
							MayaPlacementWidget* _tmp52_;
							GtkWidget* _tmp53_;
							gboolean _tmp54_;
							gboolean _tmp55_;
#line 94 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp51_ = offline;
#line 94 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp52_ = widget;
#line 94 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp53_ = _tmp52_->widget;
#line 94 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp54_ = gtk_toggle_button_get_active ((GtkToggleButton*) G_TYPE_CHECK_INSTANCE_CAST (_tmp53_, gtk_check_button_get_type (), GtkCheckButton));
#line 94 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp55_ = _tmp54_;
#line 94 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							e_source_offline_set_stay_synchronized (_tmp51_, _tmp55_);
#line 95 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							break;
#line 681 "GoogleBackend.c"
						}
					}
				}
#line 77 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_g_object_unref0 (widget);
#line 687 "GoogleBackend.c"
			}
#line 77 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			_g_object_unref0 (_widget_it);
#line 691 "GoogleBackend.c"
		}
#line 99 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp56_ = maya_model_calendar_model_get_default ();
#line 99 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		calmodel = _tmp56_;
#line 100 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp57_ = calmodel;
#line 100 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp58_ = maya_model_calendar_model_get_registry (_tmp57_);
#line 100 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp59_ = _tmp58_;
#line 100 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp60_ = _g_object_ref0 (_tmp59_);
#line 100 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		registry = _tmp60_;
#line 101 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		list = NULL;
#line 102 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp61_ = new_source;
#line 102 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp62_ = _g_object_ref0 (_tmp61_);
#line 102 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		list = g_list_append (list, _tmp62_);
#line 103 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp63_ = registry;
#line 103 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp64_ = list;
#line 103 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		e_source_registry_create_sources_sync (_tmp63_, _tmp64_, NULL, &_inner_error_);
#line 103 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 103 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			(list == NULL) ? NULL : (list = (_g_list_free__g_object_unref0_ (list), NULL));
#line 103 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			_g_object_unref0 (registry);
#line 103 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			_g_object_unref0 (calmodel);
#line 103 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			_g_object_unref0 (auth);
#line 103 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			_g_object_unref0 (offline);
#line 103 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			_g_object_unref0 (webdav);
#line 103 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			_g_object_unref0 (cal);
#line 103 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			_g_object_unref0 (new_source);
#line 739 "GoogleBackend.c"
			goto __catch0_g_error;
		}
#line 104 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp65_ = calmodel;
#line 104 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp66_ = new_source;
#line 104 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		maya_model_calendar_model_add_source (_tmp65_, _tmp66_);
#line 105 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		if (set_default) {
#line 750 "GoogleBackend.c"
			ESourceRegistry* _tmp67_;
			ESource* _tmp68_;
#line 106 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			_tmp67_ = registry;
#line 106 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			_tmp68_ = new_source;
#line 106 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			g_object_set (_tmp67_, "default-calendar", _tmp68_, NULL);
#line 759 "GoogleBackend.c"
		}
#line 67 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		(list == NULL) ? NULL : (list = (_g_list_free__g_object_unref0_ (list), NULL));
#line 67 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_g_object_unref0 (registry);
#line 67 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_g_object_unref0 (calmodel);
#line 67 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_g_object_unref0 (auth);
#line 67 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_g_object_unref0 (offline);
#line 67 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_g_object_unref0 (webdav);
#line 67 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_g_object_unref0 (cal);
#line 67 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_g_object_unref0 (new_source);
#line 777 "GoogleBackend.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* _error_ = NULL;
		GError* _tmp69_;
		const gchar* _tmp70_;
#line 67 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_error_ = _inner_error_;
#line 67 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_inner_error_ = NULL;
#line 110 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp69_ = _error_;
#line 110 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp70_ = _tmp69_->message;
#line 110 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		g_critical ("GoogleBackend.vala:110: %s", _tmp70_);
#line 67 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_g_error_free0 (_error_);
#line 797 "GoogleBackend.c"
	}
	__finally0:
#line 67 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 67 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 67 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		g_clear_error (&_inner_error_);
#line 67 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		return;
#line 808 "GoogleBackend.c"
	}
}


static void
maya_google_backend_real_modify_calendar (MayaBackend* base,
                                          const gchar* name,
                                          const gchar* color,
                                          gboolean set_default,
                                          GeeCollection* widgets,
                                          ESource* source)
{
	MayaGoogleBackend * self;
	GError * _inner_error_ = NULL;
#line 114 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	self = (MayaGoogleBackend*) base;
#line 114 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	g_return_if_fail (name != NULL);
#line 114 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	g_return_if_fail (color != NULL);
#line 114 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	g_return_if_fail (widgets != NULL);
#line 114 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	g_return_if_fail (source != NULL);
#line 833 "GoogleBackend.c"
	{
		ESourceCalendar* cal = NULL;
		ESourceExtension* _tmp0_;
		ESourceCalendar* _tmp1_;
		ESourceCalendar* _tmp2_;
		ESourceWebdav* webdav = NULL;
		ESourceExtension* _tmp3_;
		ESourceWebdav* _tmp4_;
		ESourceOffline* offline = NULL;
		ESourceExtension* _tmp5_;
		ESourceOffline* _tmp6_;
		ESourceAuthentication* auth = NULL;
		ESourceExtension* _tmp7_;
		ESourceAuthentication* _tmp8_;
#line 116 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		e_source_set_display_name (source, name);
#line 117 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp0_ = e_source_get_extension (source, E_SOURCE_EXTENSION_CALENDAR);
#line 117 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp1_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, e_source_calendar_get_type (), ESourceCalendar));
#line 117 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		cal = _tmp1_;
#line 118 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp2_ = cal;
#line 118 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		e_source_selectable_set_color ((ESourceSelectable*) _tmp2_, color);
#line 119 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp3_ = e_source_get_extension (source, E_SOURCE_EXTENSION_WEBDAV_BACKEND);
#line 119 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp4_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, e_source_webdav_get_type (), ESourceWebdav));
#line 119 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		webdav = _tmp4_;
#line 120 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp5_ = e_source_get_extension (source, E_SOURCE_EXTENSION_OFFLINE);
#line 120 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp6_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp5_, e_source_offline_get_type (), ESourceOffline));
#line 120 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		offline = _tmp6_;
#line 121 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp7_ = e_source_get_extension (source, E_SOURCE_EXTENSION_AUTHENTICATION);
#line 121 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp8_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp7_, e_source_authentication_get_type (), ESourceAuthentication));
#line 121 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		auth = _tmp8_;
#line 878 "GoogleBackend.c"
		{
			GeeIterator* _widget_it = NULL;
			GeeIterator* _tmp9_;
#line 122 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			_tmp9_ = gee_iterable_iterator ((GeeIterable*) widgets);
#line 122 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			_widget_it = _tmp9_;
#line 122 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			while (TRUE) {
#line 888 "GoogleBackend.c"
				GeeIterator* _tmp10_;
				MayaPlacementWidget* widget = NULL;
				GeeIterator* _tmp11_;
				gpointer _tmp12_;
				MayaPlacementWidget* _tmp13_;
				const gchar* _tmp14_;
				const gchar* _tmp15_;
				GQuark _tmp17_ = 0U;
#line 123 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				static GQuark _tmp16_label0 = 0;
#line 123 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				static GQuark _tmp16_label1 = 0;
#line 122 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_tmp10_ = _widget_it;
#line 122 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				if (!gee_iterator_next (_tmp10_)) {
#line 122 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
					break;
#line 907 "GoogleBackend.c"
				}
#line 122 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_tmp11_ = _widget_it;
#line 122 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_tmp12_ = gee_iterator_get (_tmp11_);
#line 122 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				widget = (MayaPlacementWidget*) _tmp12_;
#line 123 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_tmp13_ = widget;
#line 123 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_tmp14_ = _tmp13_->ref_name;
#line 123 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_tmp15_ = _tmp14_;
#line 123 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_tmp17_ = (NULL == _tmp15_) ? 0 : g_quark_from_string (_tmp15_);
#line 123 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				if (_tmp17_ == ((0 != _tmp16_label0) ? _tmp16_label0 : (_tmp16_label0 = g_quark_from_static_string ("user_entry")))) {
#line 123 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
					switch (0) {
#line 927 "GoogleBackend.c"
						default:
						{
							gchar* decoded_user = NULL;
							MayaPlacementWidget* _tmp18_;
							GtkWidget* _tmp19_;
							const gchar* _tmp20_;
							const gchar* _tmp21_;
							gchar* _tmp22_;
							gboolean _tmp23_ = FALSE;
							const gchar* _tmp24_;
							ESourceAuthentication* _tmp28_;
							const gchar* _tmp29_;
							SoupURI* soup_uri = NULL;
							SoupURI* _tmp30_;
							SoupURI* _tmp31_;
							SoupURI* _tmp32_;
							SoupURI* _tmp33_;
							const gchar* _tmp34_;
							SoupURI* _tmp35_;
							const gchar* _tmp36_;
							gchar* _tmp37_;
							gchar* _tmp38_;
							ESourceWebdav* _tmp39_;
							SoupURI* _tmp40_;
#line 125 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp18_ = widget;
#line 125 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp19_ = _tmp18_->widget;
#line 125 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp20_ = gtk_entry_get_text (G_TYPE_CHECK_INSTANCE_CAST (_tmp19_, gtk_entry_get_type (), GtkEntry));
#line 125 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp21_ = _tmp20_;
#line 125 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp22_ = g_strdup (_tmp21_);
#line 125 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							decoded_user = _tmp22_;
#line 126 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp24_ = decoded_user;
#line 126 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							if (!string_contains (_tmp24_, "@")) {
#line 968 "GoogleBackend.c"
								const gchar* _tmp25_;
#line 126 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
								_tmp25_ = decoded_user;
#line 126 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
								_tmp23_ = !string_contains (_tmp25_, "%40");
#line 974 "GoogleBackend.c"
							} else {
#line 126 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
								_tmp23_ = FALSE;
#line 978 "GoogleBackend.c"
							}
#line 126 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							if (_tmp23_) {
#line 982 "GoogleBackend.c"
								const gchar* _tmp26_;
								gchar* _tmp27_;
#line 127 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
								_tmp26_ = decoded_user;
#line 127 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
								_tmp27_ = g_strdup_printf ("%s@gmail.com", _tmp26_);
#line 127 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
								_g_free0 (decoded_user);
#line 127 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
								decoded_user = _tmp27_;
#line 993 "GoogleBackend.c"
							}
#line 130 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp28_ = auth;
#line 130 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp29_ = decoded_user;
#line 130 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							e_source_authentication_set_user (_tmp28_, _tmp29_);
#line 131 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp30_ = soup_uri_new (NULL);
#line 131 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							soup_uri = _tmp30_;
#line 132 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp31_ = soup_uri;
#line 132 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							soup_uri_set_host (_tmp31_, "www.google.com");
#line 133 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp32_ = soup_uri;
#line 133 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							soup_uri_set_scheme (_tmp32_, "https");
#line 134 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp33_ = soup_uri;
#line 134 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp34_ = decoded_user;
#line 134 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							soup_uri_set_user (_tmp33_, _tmp34_);
#line 135 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp35_ = soup_uri;
#line 135 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp36_ = decoded_user;
#line 135 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp37_ = g_strdup_printf ("/calendar/dav/%s/events", _tmp36_);
#line 135 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp38_ = _tmp37_;
#line 135 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							soup_uri_set_path (_tmp35_, _tmp38_);
#line 135 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_g_free0 (_tmp38_);
#line 136 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp39_ = webdav;
#line 136 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp40_ = soup_uri;
#line 136 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							g_object_set (_tmp39_, "soup-uri", _tmp40_, NULL);
#line 137 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							__vala_SoupURI_free0 (soup_uri);
#line 137 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_g_free0 (decoded_user);
#line 137 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							break;
#line 1043 "GoogleBackend.c"
						}
					}
				} else if (_tmp17_ == ((0 != _tmp16_label1) ? _tmp16_label1 : (_tmp16_label1 = g_quark_from_static_string ("keep_copy")))) {
#line 123 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
					switch (0) {
#line 1049 "GoogleBackend.c"
						default:
						{
							ESourceOffline* _tmp41_;
							MayaPlacementWidget* _tmp42_;
							GtkWidget* _tmp43_;
							gboolean _tmp44_;
							gboolean _tmp45_;
#line 139 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp41_ = offline;
#line 139 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp42_ = widget;
#line 139 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp43_ = _tmp42_->widget;
#line 139 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp44_ = gtk_toggle_button_get_active ((GtkToggleButton*) G_TYPE_CHECK_INSTANCE_CAST (_tmp43_, gtk_check_button_get_type (), GtkCheckButton));
#line 139 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							_tmp45_ = _tmp44_;
#line 139 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							e_source_offline_set_stay_synchronized (_tmp41_, _tmp45_);
#line 140 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
							break;
#line 1071 "GoogleBackend.c"
						}
					}
				}
#line 122 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_g_object_unref0 (widget);
#line 1077 "GoogleBackend.c"
			}
#line 122 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			_g_object_unref0 (_widget_it);
#line 1081 "GoogleBackend.c"
		}
#line 144 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		e_source_write (source, NULL, NULL, NULL);
#line 145 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		if (set_default) {
#line 1087 "GoogleBackend.c"
			ESourceRegistry* registry = NULL;
			ESourceRegistry* _tmp46_;
			ESourceRegistry* _tmp47_;
#line 146 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			_tmp46_ = e_source_registry_new_sync (NULL, &_inner_error_);
#line 146 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			registry = _tmp46_;
#line 146 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 146 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_g_object_unref0 (auth);
#line 146 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_g_object_unref0 (offline);
#line 146 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_g_object_unref0 (webdav);
#line 146 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
				_g_object_unref0 (cal);
#line 1105 "GoogleBackend.c"
				goto __catch1_g_error;
			}
#line 147 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			_tmp47_ = registry;
#line 147 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			g_object_set (_tmp47_, "default-calendar", source, NULL);
#line 145 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
			_g_object_unref0 (registry);
#line 1114 "GoogleBackend.c"
		}
#line 115 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_g_object_unref0 (auth);
#line 115 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_g_object_unref0 (offline);
#line 115 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_g_object_unref0 (webdav);
#line 115 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_g_object_unref0 (cal);
#line 1124 "GoogleBackend.c"
	}
	goto __finally1;
	__catch1_g_error:
	{
		GError* _error_ = NULL;
		GError* _tmp48_;
		const gchar* _tmp49_;
#line 115 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_error_ = _inner_error_;
#line 115 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_inner_error_ = NULL;
#line 151 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp48_ = _error_;
#line 151 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_tmp49_ = _tmp48_->message;
#line 151 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		g_critical ("GoogleBackend.vala:151: %s", _tmp49_);
#line 115 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		_g_error_free0 (_error_);
#line 1144 "GoogleBackend.c"
	}
	__finally1:
#line 115 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 115 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 115 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		g_clear_error (&_inner_error_);
#line 115 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
		return;
#line 1155 "GoogleBackend.c"
	}
}


static void
maya_google_backend_class_init (MayaGoogleBackendClass * klass)
{
#line 32 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	maya_google_backend_parent_class = g_type_class_peek_parent (klass);
#line 1165 "GoogleBackend.c"
}


static void
maya_google_backend_maya_backend_interface_init (MayaBackendIface * iface)
{
#line 32 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	maya_google_backend_maya_backend_parent_iface = g_type_interface_peek_parent (iface);
#line 32 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	iface->get_name = (gchar* (*) (MayaBackend *)) maya_google_backend_real_get_name;
#line 32 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	iface->get_uid = (gchar* (*) (MayaBackend *)) maya_google_backend_real_get_uid;
#line 32 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	iface->get_new_calendar_widget = (GeeCollection* (*) (MayaBackend *, ESource*)) maya_google_backend_real_get_new_calendar_widget;
#line 32 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	iface->add_new_calendar = (void (*) (MayaBackend *, const gchar*, const gchar*, gboolean, GeeCollection*)) maya_google_backend_real_add_new_calendar;
#line 32 "/run/build/io.elementary.calendar/plugins/Google/GoogleBackend.vala"
	iface->modify_calendar = (void (*) (MayaBackend *, const gchar*, const gchar*, gboolean, GeeCollection*, ESource*)) maya_google_backend_real_modify_calendar;
#line 1184 "GoogleBackend.c"
}


static void
maya_google_backend_instance_init (MayaGoogleBackend * self)
{
}


GType
maya_google_backend_get_type (void)
{
	static volatile gsize maya_google_backend_type_id__volatile = 0;
	if (g_once_init_enter (&maya_google_backend_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (MayaGoogleBackendClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) maya_google_backend_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (MayaGoogleBackend), 0, (GInstanceInitFunc) maya_google_backend_instance_init, NULL };
		static const GInterfaceInfo maya_backend_info = { (GInterfaceInitFunc) maya_google_backend_maya_backend_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		GType maya_google_backend_type_id;
		maya_google_backend_type_id = g_type_register_static (G_TYPE_OBJECT, "MayaGoogleBackend", &g_define_type_info, 0);
		g_type_add_interface_static (maya_google_backend_type_id, MAYA_TYPE_BACKEND, &maya_backend_info);
		g_once_init_leave (&maya_google_backend_type_id__volatile, maya_google_backend_type_id);
	}
	return maya_google_backend_type_id__volatile;
}



