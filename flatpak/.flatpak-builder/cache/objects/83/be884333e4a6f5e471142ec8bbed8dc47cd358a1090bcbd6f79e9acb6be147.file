/* kf-persona.c generated by valac 0.40.11, the Vala compiler
 * generated from kf-persona.vala, do not modify */

/*
 * Copyright (C) 2010 Collabora Ltd.
 *
 * This library is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation, either version 2.1 of the License, or
 * (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with this library.  If not, see <http://www.gnu.org/licenses/>.
 *
 * Authors:
 *       Philip Withnall <philip.withnall@collabora.co.uk>
 */


#include <glib.h>
#include <glib-object.h>
#include <folks/folks.h>
#include <gee.h>
#include <stdlib.h>
#include <string.h>
#include <folks/small-set.h>
#include <gio/gio.h>
#include <glib/gi18n-lib.h>
#include <folks-internal.h>


#define FOLKS_BACKENDS_KF_TYPE_PERSONA (folks_backends_kf_persona_get_type ())
#define FOLKS_BACKENDS_KF_PERSONA(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), FOLKS_BACKENDS_KF_TYPE_PERSONA, FolksBackendsKfPersona))
#define FOLKS_BACKENDS_KF_PERSONA_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), FOLKS_BACKENDS_KF_TYPE_PERSONA, FolksBackendsKfPersonaClass))
#define FOLKS_BACKENDS_KF_IS_PERSONA(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), FOLKS_BACKENDS_KF_TYPE_PERSONA))
#define FOLKS_BACKENDS_KF_IS_PERSONA_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), FOLKS_BACKENDS_KF_TYPE_PERSONA))
#define FOLKS_BACKENDS_KF_PERSONA_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), FOLKS_BACKENDS_KF_TYPE_PERSONA, FolksBackendsKfPersonaClass))

typedef struct _FolksBackendsKfPersona FolksBackendsKfPersona;
typedef struct _FolksBackendsKfPersonaClass FolksBackendsKfPersonaClass;
typedef struct _FolksBackendsKfPersonaPrivate FolksBackendsKfPersonaPrivate;
enum  {
	FOLKS_BACKENDS_KF_PERSONA_0_PROPERTY,
	FOLKS_BACKENDS_KF_PERSONA_LINKABLE_PROPERTIES_PROPERTY,
	FOLKS_BACKENDS_KF_PERSONA_WRITEABLE_PROPERTIES_PROPERTY,
	FOLKS_BACKENDS_KF_PERSONA_ALIAS_PROPERTY,
	FOLKS_BACKENDS_KF_PERSONA_IM_ADDRESSES_PROPERTY,
	FOLKS_BACKENDS_KF_PERSONA_WEB_SERVICE_ADDRESSES_PROPERTY,
	FOLKS_BACKENDS_KF_PERSONA_ANTI_LINKS_PROPERTY,
	FOLKS_BACKENDS_KF_PERSONA_NUM_PROPERTIES
};
static GParamSpec* folks_backends_kf_persona_properties[FOLKS_BACKENDS_KF_PERSONA_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))

#define FOLKS_BACKENDS_KF_TYPE_PERSONA_STORE (folks_backends_kf_persona_store_get_type ())
#define FOLKS_BACKENDS_KF_PERSONA_STORE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), FOLKS_BACKENDS_KF_TYPE_PERSONA_STORE, FolksBackendsKfPersonaStore))
#define FOLKS_BACKENDS_KF_PERSONA_STORE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), FOLKS_BACKENDS_KF_TYPE_PERSONA_STORE, FolksBackendsKfPersonaStoreClass))
#define FOLKS_BACKENDS_KF_IS_PERSONA_STORE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), FOLKS_BACKENDS_KF_TYPE_PERSONA_STORE))
#define FOLKS_BACKENDS_KF_IS_PERSONA_STORE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), FOLKS_BACKENDS_KF_TYPE_PERSONA_STORE))
#define FOLKS_BACKENDS_KF_PERSONA_STORE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), FOLKS_BACKENDS_KF_TYPE_PERSONA_STORE, FolksBackendsKfPersonaStoreClass))

typedef struct _FolksBackendsKfPersonaStore FolksBackendsKfPersonaStore;
typedef struct _FolksBackendsKfPersonaStoreClass FolksBackendsKfPersonaStoreClass;
typedef struct _FolksBackendsKfPersonaChangeAliasData FolksBackendsKfPersonaChangeAliasData;
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _FolksBackendsKfPersonaChangeImAddressesData FolksBackendsKfPersonaChangeImAddressesData;
typedef struct _FolksBackendsKfPersonaChangeWebServiceAddressesData FolksBackendsKfPersonaChangeWebServiceAddressesData;
typedef struct _FolksBackendsKfPersonaChangeAntiLinksData FolksBackendsKfPersonaChangeAntiLinksData;

struct _FolksBackendsKfPersona {
	FolksPersona parent_instance;
	FolksBackendsKfPersonaPrivate * priv;
};

struct _FolksBackendsKfPersonaClass {
	FolksPersonaClass parent_class;
};

struct _FolksBackendsKfPersonaPrivate {
	GeeHashMultiMap* _im_addresses;
	GeeHashMultiMap* _web_service_addresses;
	gchar* _alias;
	FolksSmallSet* _anti_links;
	GeeSet* _anti_links_ro;
};

struct _FolksBackendsKfPersonaChangeAliasData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GAsyncReadyCallback _callback_;
	gboolean _task_complete_;
	FolksBackendsKfPersona* self;
	gchar* alias;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
	GKeyFile* key_file;
	FolksPersonaStore* _tmp4_;
	FolksPersonaStore* _tmp5_;
	GKeyFile* _tmp6_;
	GKeyFile* _tmp7_;
	const gchar* _tmp8_;
	const gchar* _tmp9_;
	FolksPersonaStore* _tmp10_;
	FolksPersonaStore* _tmp11_;
	gchar* _tmp12_;
};

struct _FolksBackendsKfPersonaChangeImAddressesData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GAsyncReadyCallback _callback_;
	gboolean _task_complete_;
	FolksBackendsKfPersona* self;
	GeeMultiMap* im_addresses;
	GKeyFile* key_file;
	FolksPersonaStore* _tmp0_;
	FolksPersonaStore* _tmp1_;
	GKeyFile* _tmp2_;
	GeeIterator* _protocol1_it;
	GeeHashMultiMap* _tmp3_;
	GeeSet* _tmp4_;
	GeeSet* _tmp5_;
	GeeIterator* _tmp6_;
	GeeIterator* _tmp7_;
	GeeIterator* _tmp8_;
	gchar* protocol1;
	GeeIterator* _tmp9_;
	gpointer _tmp10_;
	GKeyFile* _tmp11_;
	const gchar* _tmp12_;
	const gchar* _tmp13_;
	const gchar* _tmp14_;
	GError* e1;
	GeeHashMultiMap* new_im_addresses;
	GeeHashMultiMap* _tmp15_;
	GeeIterator* _protocol2_it;
	GeeSet* _tmp16_;
	GeeSet* _tmp17_;
	GeeIterator* _tmp18_;
	GeeIterator* _tmp19_;
	GeeIterator* _tmp20_;
	gchar* protocol2;
	GeeIterator* _tmp21_;
	gpointer _tmp22_;
	GeeCollection* addresses;
	const gchar* _tmp23_;
	GeeCollection* _tmp24_;
	FolksSmallSet* normalised_addresses;
	FolksSmallSet* _tmp25_;
	GeeIterator* _im_fd_it;
	GeeCollection* _tmp26_;
	GeeIterator* _tmp27_;
	GeeIterator* _tmp28_;
	FolksImFieldDetails* im_fd;
	GeeIterator* _tmp29_;
	gpointer _tmp30_;
	gchar* normalised_address;
	gchar* _tmp31_;
	FolksImFieldDetails* _tmp32_;
	gconstpointer _tmp33_;
	const gchar* _tmp34_;
	const gchar* _tmp35_;
	gchar* _tmp36_;
	gchar* _tmp37_;
	GError* e2;
	FolksImFieldDetails* _tmp38_;
	gconstpointer _tmp39_;
	const gchar* _tmp40_;
	const gchar* _tmp41_;
	GError* _tmp42_;
	const gchar* _tmp43_;
	GError* _tmp44_;
	FolksSmallSet* _tmp45_;
	const gchar* _tmp46_;
	FolksImFieldDetails* new_im_fd;
	const gchar* _tmp47_;
	FolksImFieldDetails* _tmp48_;
	GeeHashMultiMap* _tmp49_;
	const gchar* _tmp50_;
	FolksImFieldDetails* _tmp51_;
	gchar** addrs;
	FolksSmallSet* _tmp52_;
	gint _tmp53_;
	gpointer* _tmp54_;
	gint addrs_length1;
	gint _addrs_size_;
	FolksSmallSet* _tmp55_;
	gint _tmp56_;
	gint _tmp57_;
	gint _tmp58_;
	GKeyFile* _tmp59_;
	const gchar* _tmp60_;
	const gchar* _tmp61_;
	const gchar* _tmp62_;
	gchar** _tmp63_;
	gint _tmp63__length1;
	FolksPersonaStore* _tmp64_;
	FolksPersonaStore* _tmp65_;
	GeeHashMultiMap* _tmp66_;
	GeeHashMultiMap* _tmp67_;
	GError * _inner_error_;
};

struct _FolksBackendsKfPersonaChangeWebServiceAddressesData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GAsyncReadyCallback _callback_;
	gboolean _task_complete_;
	FolksBackendsKfPersona* self;
	GeeMultiMap* web_service_addresses;
	GKeyFile* key_file;
	FolksPersonaStore* _tmp0_;
	FolksPersonaStore* _tmp1_;
	GKeyFile* _tmp2_;
	GeeIterator* _web_service1_it;
	GeeHashMultiMap* _tmp3_;
	GeeSet* _tmp4_;
	GeeSet* _tmp5_;
	GeeIterator* _tmp6_;
	GeeIterator* _tmp7_;
	GeeIterator* _tmp8_;
	gchar* web_service1;
	GeeIterator* _tmp9_;
	gpointer _tmp10_;
	GKeyFile* _tmp11_;
	const gchar* _tmp12_;
	const gchar* _tmp13_;
	const gchar* _tmp14_;
	gchar* _tmp15_;
	gchar* _tmp16_;
	GError* e;
	GeeHashMultiMap* new_web_service_addresses;
	GeeHashMultiMap* _tmp17_;
	GeeIterator* _web_service2_it;
	GeeSet* _tmp18_;
	GeeSet* _tmp19_;
	GeeIterator* _tmp20_;
	GeeIterator* _tmp21_;
	GeeIterator* _tmp22_;
	gchar* web_service2;
	GeeIterator* _tmp23_;
	gpointer _tmp24_;
	GeeCollection* ws_fds;
	const gchar* _tmp25_;
	GeeCollection* _tmp26_;
	gchar** addrs;
	gchar** _tmp27_;
	gint addrs_length1;
	gint _addrs_size_;
	GeeIterator* _ws_fd1_it;
	GeeCollection* _tmp28_;
	GeeIterator* _tmp29_;
	GeeIterator* _tmp30_;
	FolksWebServiceFieldDetails* ws_fd1;
	GeeIterator* _tmp31_;
	gpointer _tmp32_;
	gchar** _tmp33_;
	gint _tmp33__length1;
	FolksWebServiceFieldDetails* _tmp34_;
	gconstpointer _tmp35_;
	const gchar* _tmp36_;
	gchar* _tmp37_;
	GKeyFile* _tmp38_;
	const gchar* _tmp39_;
	const gchar* _tmp40_;
	const gchar* _tmp41_;
	gchar* _tmp42_;
	gchar* _tmp43_;
	gchar** _tmp44_;
	gint _tmp44__length1;
	GeeIterator* _ws_fd2_it;
	GeeCollection* _tmp45_;
	GeeIterator* _tmp46_;
	GeeIterator* _tmp47_;
	FolksWebServiceFieldDetails* ws_fd2;
	GeeIterator* _tmp48_;
	gpointer _tmp49_;
	GeeHashMultiMap* _tmp50_;
	const gchar* _tmp51_;
	FolksWebServiceFieldDetails* _tmp52_;
	FolksPersonaStore* _tmp53_;
	FolksPersonaStore* _tmp54_;
	GeeHashMultiMap* _tmp55_;
	GeeHashMultiMap* _tmp56_;
	GError * _inner_error_;
};

struct _FolksBackendsKfPersonaChangeAntiLinksData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GAsyncReadyCallback _callback_;
	gboolean _task_complete_;
	FolksBackendsKfPersona* self;
	GeeSet* anti_links;
	GeeSet* _tmp0_;
	GeeSet* _tmp1_;
	GKeyFile* key_file;
	FolksPersonaStore* _tmp2_;
	FolksPersonaStore* _tmp3_;
	GKeyFile* _tmp4_;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	GKeyFile* _tmp7_;
	const gchar* _tmp8_;
	const gchar* _tmp9_;
	gint _tmp10_;
	gpointer* _tmp11_;
	gchar** _tmp12_;
	gint _tmp12__length1;
	FolksPersonaStore* _tmp13_;
	FolksPersonaStore* _tmp14_;
	FolksSmallSet* _tmp15_;
	FolksSmallSet* _tmp16_;
};


static gpointer folks_backends_kf_persona_parent_class = NULL;
static FolksAliasDetailsIface * folks_backends_kf_persona_folks_alias_details_parent_iface = NULL;
static FolksAntiLinkableIface * folks_backends_kf_persona_folks_anti_linkable_parent_iface = NULL;
static FolksImDetailsIface * folks_backends_kf_persona_folks_im_details_parent_iface = NULL;
static FolksWebServiceDetailsIface * folks_backends_kf_persona_folks_web_service_details_parent_iface = NULL;

GType folks_backends_kf_persona_get_type (void) G_GNUC_CONST;
#define FOLKS_BACKENDS_KF_PERSONA_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), FOLKS_BACKENDS_KF_TYPE_PERSONA, FolksBackendsKfPersonaPrivate))
static void folks_backends_kf_persona_real_change_alias_data_free (gpointer _data);
static void folks_backends_kf_persona_real_change_alias_async_ready_wrapper (GObject *source_object,
                                                                      GAsyncResult *res,
                                                                      void *user_data);
static void folks_backends_kf_persona_real_change_alias (FolksAliasDetails* base,
                                                  const gchar* alias,
                                                  GAsyncReadyCallback _callback_,
                                                  gpointer _user_data_);
static gboolean folks_backends_kf_persona_real_change_alias_co (FolksBackendsKfPersonaChangeAliasData* _data_);
GType folks_backends_kf_persona_store_get_type (void) G_GNUC_CONST;
GKeyFile* folks_backends_kf_persona_store_get_key_file (FolksBackendsKfPersonaStore* self);
void folks_backends_kf_persona_store_save_key_file (FolksBackendsKfPersonaStore* self,
                                                    GAsyncReadyCallback _callback_,
                                                    gpointer _user_data_);
void folks_backends_kf_persona_store_save_key_file_finish (FolksBackendsKfPersonaStore* self,
                                                           GAsyncResult* _res_);
static void folks_backends_kf_persona_change_alias_ready (GObject* source_object,
                                                   GAsyncResult* _res_,
                                                   gpointer _user_data_);
static void folks_backends_kf_persona_real_change_im_addresses_data_free (gpointer _data);
static void folks_backends_kf_persona_real_change_im_addresses_async_ready_wrapper (GObject *source_object,
                                                                             GAsyncResult *res,
                                                                             void *user_data);
static void folks_backends_kf_persona_real_change_im_addresses (FolksImDetails* base,
                                                         GeeMultiMap* im_addresses,
                                                         GAsyncReadyCallback _callback_,
                                                         gpointer _user_data_);
static gboolean folks_backends_kf_persona_real_change_im_addresses_co (FolksBackendsKfPersonaChangeImAddressesData* _data_);
static guint _folks_abstract_field_details_hash_static_gee_hash_data_func (gconstpointer v,
                                                                    gpointer self);
static gboolean _folks_abstract_field_details_equal_static_gee_equal_data_func (gconstpointer a,
                                                                         gconstpointer b,
                                                                         gpointer self);
static void folks_backends_kf_persona_change_im_addresses_ready (GObject* source_object,
                                                          GAsyncResult* _res_,
                                                          gpointer _user_data_);
static void folks_backends_kf_persona_real_change_web_service_addresses_data_free (gpointer _data);
static void folks_backends_kf_persona_real_change_web_service_addresses_async_ready_wrapper (GObject *source_object,
                                                                                      GAsyncResult *res,
                                                                                      void *user_data);
static void folks_backends_kf_persona_real_change_web_service_addresses (FolksWebServiceDetails* base,
                                                                  GeeMultiMap* web_service_addresses,
                                                                  GAsyncReadyCallback _callback_,
                                                                  gpointer _user_data_);
static gboolean folks_backends_kf_persona_real_change_web_service_addresses_co (FolksBackendsKfPersonaChangeWebServiceAddressesData* _data_);
static void _vala_array_add2 (gchar** * array,
                       int* length,
                       int* size,
                       gchar* value);
static void folks_backends_kf_persona_change_web_service_addresses_ready (GObject* source_object,
                                                                   GAsyncResult* _res_,
                                                                   gpointer _user_data_);
static void folks_backends_kf_persona_real_change_anti_links_data_free (gpointer _data);
static void folks_backends_kf_persona_real_change_anti_links_async_ready_wrapper (GObject *source_object,
                                                                           GAsyncResult *res,
                                                                           void *user_data);
static void folks_backends_kf_persona_real_change_anti_links (FolksAntiLinkable* base,
                                                       GeeSet* anti_links,
                                                       GAsyncReadyCallback _callback_,
                                                       gpointer _user_data_);
static gboolean folks_backends_kf_persona_real_change_anti_links_co (FolksBackendsKfPersonaChangeAntiLinksData* _data_);
#define FOLKS_BACKENDS_KF_PERSONA_STORE_anti_links_key_name "__anti-links"
static void folks_backends_kf_persona_change_anti_links_ready (GObject* source_object,
                                                        GAsyncResult* _res_,
                                                        gpointer _user_data_);
FolksBackendsKfPersona* folks_backends_kf_persona_new (const gchar* id,
                                                       FolksPersonaStore* store);
FolksBackendsKfPersona* folks_backends_kf_persona_construct (GType object_type,
                                                             const gchar* id,
                                                             FolksPersonaStore* store);
static void folks_backends_kf_persona_real_linkable_property_to_links (FolksPersona* base,
                                                                const gchar* prop_name,
                                                                FolksPersonaLinkablePropertyCallback callback,
                                                                gpointer callback_target);
static GObject * folks_backends_kf_persona_constructor (GType type,
                                                 guint n_construct_properties,
                                                 GObjectConstructParam * construct_properties);
static void folks_backends_kf_persona_finalize (GObject * obj);
static void _vala_folks_backends_kf_persona_get_property (GObject * object,
                                                   guint property_id,
                                                   GValue * value,
                                                   GParamSpec * pspec);
static void _vala_folks_backends_kf_persona_set_property (GObject * object,
                                                   guint property_id,
                                                   const GValue * value,
                                                   GParamSpec * pspec);
static void _vala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);

static const gchar* FOLKS_BACKENDS_KF_PERSONA__linkable_properties[3] = {"im-addresses", "web-service-addresses", NULL};
static const gchar* FOLKS_BACKENDS_KF_PERSONA__writeable_properties[5] = {"alias", "im-addresses", "web-service-addresses", "anti-links", NULL};

static void
folks_backends_kf_persona_real_change_alias_data_free (gpointer _data)
{
	FolksBackendsKfPersonaChangeAliasData* _data_;
	_data_ = _data;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_free0 (_data_->alias);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (_data_->self);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_slice_free (FolksBackendsKfPersonaChangeAliasData, _data_);
#line 449 "kf-persona.c"
}


static void
folks_backends_kf_persona_real_change_alias_async_ready_wrapper (GObject *source_object,
                                                                 GAsyncResult *res,
                                                                 void *user_data)
{
	FolksBackendsKfPersonaChangeAliasData* _task_data_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_task_data_ = g_task_get_task_data (G_TASK (res));
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (_task_data_->_callback_ != NULL) {
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		_task_data_->_callback_ (source_object, res, user_data);
#line 465 "kf-persona.c"
	}
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_task_data_->_task_complete_ = TRUE;
#line 469 "kf-persona.c"
}


static gpointer
_g_object_ref0 (gpointer self)
{
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	return self ? g_object_ref (self) : NULL;
#line 478 "kf-persona.c"
}


static void
folks_backends_kf_persona_real_change_alias (FolksAliasDetails* base,
                                             const gchar* alias,
                                             GAsyncReadyCallback _callback_,
                                             gpointer _user_data_)
{
	FolksBackendsKfPersona * self;
	FolksBackendsKfPersonaChangeAliasData* _data_;
	FolksBackendsKfPersona* _tmp0_;
	gchar* _tmp1_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	self = (FolksBackendsKfPersona*) base;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_ = g_slice_new0 (FolksBackendsKfPersonaChangeAliasData);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_callback_ = _callback_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, folks_backends_kf_persona_real_change_alias_async_ready_wrapper, _user_data_);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (_callback_ == NULL) {
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_task_complete_ = TRUE;
#line 504 "kf-persona.c"
	}
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_task_set_task_data (_data_->_async_result, _data_, folks_backends_kf_persona_real_change_alias_data_free);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->self = _tmp0_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp1_ = g_strdup (alias);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_free0 (_data_->alias);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->alias = _tmp1_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_real_change_alias_co (_data_);
#line 520 "kf-persona.c"
}


static void
folks_backends_kf_persona_real_change_alias_finish (FolksAliasDetails* base,
                                                    GAsyncResult* _res_,
                                                    GError** error)
{
	FolksBackendsKfPersonaChangeAliasData* _data_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (NULL == _data_) {
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		return;
#line 536 "kf-persona.c"
	}
}


/**
   * {@inheritDoc}
   *
   * @since 0.6.2
   */
static void
folks_backends_kf_persona_change_alias_ready (GObject* source_object,
                                              GAsyncResult* _res_,
                                              gpointer _user_data_)
{
	FolksBackendsKfPersonaChangeAliasData* _data_;
#line 107 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_ = _user_data_;
#line 107 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_source_object_ = source_object;
#line 107 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_res_ = _res_;
#line 107 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_task_complete_ = TRUE;
#line 107 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_real_change_alias_co (_data_);
#line 562 "kf-persona.c"
}


static gboolean
folks_backends_kf_persona_real_change_alias_co (FolksBackendsKfPersonaChangeAliasData* _data_)
{
#line 90 "/run/build/folks/backends/key-file/kf-persona.vala"
	switch (_data_->_state_) {
#line 90 "/run/build/folks/backends/key-file/kf-persona.vala"
		case 0:
#line 573 "kf-persona.c"
		goto _state_0;
#line 90 "/run/build/folks/backends/key-file/kf-persona.vala"
		case 1:
#line 577 "kf-persona.c"
		goto _state_1;
		default:
#line 90 "/run/build/folks/backends/key-file/kf-persona.vala"
		g_assert_not_reached ();
#line 582 "kf-persona.c"
	}
	_state_0:
#line 93 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (_data_->alias == NULL) {
#line 587 "kf-persona.c"
		gchar* _tmp0_;
#line 95 "/run/build/folks/backends/key-file/kf-persona.vala"
		_tmp0_ = g_strdup ("");
#line 95 "/run/build/folks/backends/key-file/kf-persona.vala"
		_g_free0 (_data_->alias);
#line 95 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->alias = _tmp0_;
#line 595 "kf-persona.c"
	}
#line 98 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp1_ = _data_->self->priv->_alias;
#line 98 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (g_strcmp0 (_data_->_tmp1_, _data_->alias) == 0) {
#line 100 "/run/build/folks/backends/key-file/kf-persona.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 100 "/run/build/folks/backends/key-file/kf-persona.vala"
		if (_data_->_state_ != 0) {
#line 100 "/run/build/folks/backends/key-file/kf-persona.vala"
			while (_data_->_task_complete_ != TRUE) {
#line 100 "/run/build/folks/backends/key-file/kf-persona.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 609 "kf-persona.c"
			}
		}
#line 100 "/run/build/folks/backends/key-file/kf-persona.vala"
		g_object_unref (_data_->_async_result);
#line 100 "/run/build/folks/backends/key-file/kf-persona.vala"
		return FALSE;
#line 616 "kf-persona.c"
	}
#line 103 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp2_ = folks_persona_get_uid ((FolksPersona*) _data_->self);
#line 103 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp3_ = _data_->_tmp2_;
#line 103 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_debug ("kf-persona.vala:103: Setting alias of Kf.Persona '%s' to '%s'.", _data_->_tmp3_, _data_->alias);
#line 105 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp4_ = folks_persona_get_store ((FolksPersona*) _data_->self);
#line 105 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp5_ = _data_->_tmp4_;
#line 105 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp6_ = folks_backends_kf_persona_store_get_key_file (G_TYPE_CHECK_INSTANCE_CAST (_data_->_tmp5_, FOLKS_BACKENDS_KF_TYPE_PERSONA_STORE, FolksBackendsKfPersonaStore));
#line 105 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->key_file = _data_->_tmp6_;
#line 106 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp7_ = _data_->key_file;
#line 106 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp8_ = folks_persona_get_display_id ((FolksPersona*) _data_->self);
#line 106 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp9_ = _data_->_tmp8_;
#line 106 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_key_file_set_string (_data_->_tmp7_, _data_->_tmp9_, "__alias", _data_->alias);
#line 107 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp10_ = folks_persona_get_store ((FolksPersona*) _data_->self);
#line 107 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp11_ = _data_->_tmp10_;
#line 107 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_state_ = 1;
#line 107 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_store_save_key_file (G_TYPE_CHECK_INSTANCE_CAST (_data_->_tmp11_, FOLKS_BACKENDS_KF_TYPE_PERSONA_STORE, FolksBackendsKfPersonaStore), folks_backends_kf_persona_change_alias_ready, _data_);
#line 107 "/run/build/folks/backends/key-file/kf-persona.vala"
	return FALSE;
#line 650 "kf-persona.c"
	_state_1:
#line 107 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_store_save_key_file_finish (G_TYPE_CHECK_INSTANCE_CAST (_data_->_tmp11_, FOLKS_BACKENDS_KF_TYPE_PERSONA_STORE, FolksBackendsKfPersonaStore), _data_->_res_);
#line 109 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp12_ = g_strdup (_data_->alias);
#line 109 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_free0 (_data_->self->priv->_alias);
#line 109 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->self->priv->_alias = _data_->_tmp12_;
#line 110 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_object_notify ((GObject*) _data_->self, "alias");
#line 90 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 90 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (_data_->_state_ != 0) {
#line 90 "/run/build/folks/backends/key-file/kf-persona.vala"
		while (_data_->_task_complete_ != TRUE) {
#line 90 "/run/build/folks/backends/key-file/kf-persona.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 670 "kf-persona.c"
		}
	}
#line 90 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_object_unref (_data_->_async_result);
#line 90 "/run/build/folks/backends/key-file/kf-persona.vala"
	return FALSE;
#line 677 "kf-persona.c"
}


static void
folks_backends_kf_persona_real_change_im_addresses_data_free (gpointer _data)
{
	FolksBackendsKfPersonaChangeImAddressesData* _data_;
	_data_ = _data;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (_data_->im_addresses);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (_data_->self);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_slice_free (FolksBackendsKfPersonaChangeImAddressesData, _data_);
#line 692 "kf-persona.c"
}


static void
folks_backends_kf_persona_real_change_im_addresses_async_ready_wrapper (GObject *source_object,
                                                                        GAsyncResult *res,
                                                                        void *user_data)
{
	FolksBackendsKfPersonaChangeImAddressesData* _task_data_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_task_data_ = g_task_get_task_data (G_TASK (res));
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (_task_data_->_callback_ != NULL) {
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		_task_data_->_callback_ (source_object, res, user_data);
#line 708 "kf-persona.c"
	}
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_task_data_->_task_complete_ = TRUE;
#line 712 "kf-persona.c"
}


static void
folks_backends_kf_persona_real_change_im_addresses (FolksImDetails* base,
                                                    GeeMultiMap* im_addresses,
                                                    GAsyncReadyCallback _callback_,
                                                    gpointer _user_data_)
{
	FolksBackendsKfPersona * self;
	FolksBackendsKfPersonaChangeImAddressesData* _data_;
	FolksBackendsKfPersona* _tmp0_;
	GeeMultiMap* _tmp1_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	self = (FolksBackendsKfPersona*) base;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_ = g_slice_new0 (FolksBackendsKfPersonaChangeImAddressesData);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_callback_ = _callback_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, folks_backends_kf_persona_real_change_im_addresses_async_ready_wrapper, _user_data_);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (_callback_ == NULL) {
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_task_complete_ = TRUE;
#line 738 "kf-persona.c"
	}
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_task_set_task_data (_data_->_async_result, _data_, folks_backends_kf_persona_real_change_im_addresses_data_free);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->self = _tmp0_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp1_ = _g_object_ref0 (im_addresses);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (_data_->im_addresses);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->im_addresses = _tmp1_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_real_change_im_addresses_co (_data_);
#line 754 "kf-persona.c"
}


static void
folks_backends_kf_persona_real_change_im_addresses_finish (FolksImDetails* base,
                                                           GAsyncResult* _res_,
                                                           GError** error)
{
	FolksBackendsKfPersonaChangeImAddressesData* _data_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (NULL == _data_) {
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		return;
#line 770 "kf-persona.c"
	}
}


/**
   * {@inheritDoc}
   *
   * @since 0.6.2
   */
static guint
_folks_abstract_field_details_hash_static_gee_hash_data_func (gconstpointer v,
                                                              gpointer self)
{
	guint result;
	result = folks_abstract_field_details_hash_static ((FolksAbstractFieldDetails*) v);
#line 149 "/run/build/folks/backends/key-file/kf-persona.vala"
	return result;
#line 788 "kf-persona.c"
}


static gboolean
_folks_abstract_field_details_equal_static_gee_equal_data_func (gconstpointer a,
                                                                gconstpointer b,
                                                                gpointer self)
{
	gboolean result;
	result = folks_abstract_field_details_equal_static ((FolksAbstractFieldDetails*) a, (FolksAbstractFieldDetails*) b);
#line 149 "/run/build/folks/backends/key-file/kf-persona.vala"
	return result;
#line 801 "kf-persona.c"
}


static void
folks_backends_kf_persona_change_im_addresses_ready (GObject* source_object,
                                                     GAsyncResult* _res_,
                                                     gpointer _user_data_)
{
	FolksBackendsKfPersonaChangeImAddressesData* _data_;
#line 190 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_ = _user_data_;
#line 190 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_source_object_ = source_object;
#line 190 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_res_ = _res_;
#line 190 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_task_complete_ = TRUE;
#line 190 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_real_change_im_addresses_co (_data_);
#line 821 "kf-persona.c"
}


static gboolean
folks_backends_kf_persona_real_change_im_addresses_co (FolksBackendsKfPersonaChangeImAddressesData* _data_)
{
#line 128 "/run/build/folks/backends/key-file/kf-persona.vala"
	switch (_data_->_state_) {
#line 128 "/run/build/folks/backends/key-file/kf-persona.vala"
		case 0:
#line 832 "kf-persona.c"
		goto _state_0;
#line 128 "/run/build/folks/backends/key-file/kf-persona.vala"
		case 1:
#line 836 "kf-persona.c"
		goto _state_1;
		default:
#line 128 "/run/build/folks/backends/key-file/kf-persona.vala"
		g_assert_not_reached ();
#line 841 "kf-persona.c"
	}
	_state_0:
#line 131 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp0_ = folks_persona_get_store ((FolksPersona*) _data_->self);
#line 131 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp1_ = _data_->_tmp0_;
#line 131 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp2_ = folks_backends_kf_persona_store_get_key_file (G_TYPE_CHECK_INSTANCE_CAST (_data_->_tmp1_, FOLKS_BACKENDS_KF_TYPE_PERSONA_STORE, FolksBackendsKfPersonaStore));
#line 131 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->key_file = _data_->_tmp2_;
#line 852 "kf-persona.c"
	{
#line 134 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_tmp3_ = _data_->self->priv->_im_addresses;
#line 134 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_tmp4_ = gee_multi_map_get_keys ((GeeMultiMap*) _data_->_tmp3_);
#line 134 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_tmp5_ = _data_->_tmp4_;
#line 134 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_tmp6_ = gee_iterable_iterator ((GeeIterable*) _data_->_tmp5_);
#line 134 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_tmp7_ = _data_->_tmp6_;
#line 134 "/run/build/folks/backends/key-file/kf-persona.vala"
		_g_object_unref0 (_data_->_tmp5_);
#line 134 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_protocol1_it = _data_->_tmp7_;
#line 134 "/run/build/folks/backends/key-file/kf-persona.vala"
		while (TRUE) {
#line 134 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp8_ = _data_->_protocol1_it;
#line 134 "/run/build/folks/backends/key-file/kf-persona.vala"
			if (!gee_iterator_next (_data_->_tmp8_)) {
#line 134 "/run/build/folks/backends/key-file/kf-persona.vala"
				break;
#line 876 "kf-persona.c"
			}
#line 134 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp9_ = _data_->_protocol1_it;
#line 134 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp10_ = gee_iterator_get (_data_->_tmp9_);
#line 134 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->protocol1 = (gchar*) _data_->_tmp10_;
#line 884 "kf-persona.c"
			{
#line 138 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_tmp11_ = _data_->key_file;
#line 138 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_tmp12_ = folks_persona_get_display_id ((FolksPersona*) _data_->self);
#line 138 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_tmp13_ = _data_->_tmp12_;
#line 138 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_tmp14_ = _data_->protocol1;
#line 138 "/run/build/folks/backends/key-file/kf-persona.vala"
				g_key_file_remove_key (_data_->_tmp11_, _data_->_tmp13_, _data_->_tmp14_, &_data_->_inner_error_);
#line 138 "/run/build/folks/backends/key-file/kf-persona.vala"
				if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 138 "/run/build/folks/backends/key-file/kf-persona.vala"
					if (_data_->_inner_error_->domain == G_KEY_FILE_ERROR) {
#line 900 "kf-persona.c"
						goto __catch2_g_key_file_error;
					}
#line 138 "/run/build/folks/backends/key-file/kf-persona.vala"
					_g_free0 (_data_->protocol1);
#line 138 "/run/build/folks/backends/key-file/kf-persona.vala"
					_g_object_unref0 (_data_->_protocol1_it);
#line 138 "/run/build/folks/backends/key-file/kf-persona.vala"
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error_->message, g_quark_to_string (_data_->_inner_error_->domain), _data_->_inner_error_->code);
#line 138 "/run/build/folks/backends/key-file/kf-persona.vala"
					g_clear_error (&_data_->_inner_error_);
#line 138 "/run/build/folks/backends/key-file/kf-persona.vala"
					g_object_unref (_data_->_async_result);
#line 138 "/run/build/folks/backends/key-file/kf-persona.vala"
					return FALSE;
#line 915 "kf-persona.c"
				}
			}
			goto __finally2;
			__catch2_g_key_file_error:
			{
#line 136 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->e1 = _data_->_inner_error_;
#line 136 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_inner_error_ = NULL;
#line 136 "/run/build/folks/backends/key-file/kf-persona.vala"
				_g_error_free0 (_data_->e1);
#line 927 "kf-persona.c"
			}
			__finally2:
#line 136 "/run/build/folks/backends/key-file/kf-persona.vala"
			if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 136 "/run/build/folks/backends/key-file/kf-persona.vala"
				if (_data_->_inner_error_->domain == FOLKS_PROPERTY_ERROR) {
#line 136 "/run/build/folks/backends/key-file/kf-persona.vala"
					g_task_return_error (_data_->_async_result, _data_->_inner_error_);
#line 136 "/run/build/folks/backends/key-file/kf-persona.vala"
					_g_free0 (_data_->protocol1);
#line 136 "/run/build/folks/backends/key-file/kf-persona.vala"
					_g_object_unref0 (_data_->_protocol1_it);
#line 136 "/run/build/folks/backends/key-file/kf-persona.vala"
					g_object_unref (_data_->_async_result);
#line 136 "/run/build/folks/backends/key-file/kf-persona.vala"
					return FALSE;
#line 944 "kf-persona.c"
				} else {
#line 136 "/run/build/folks/backends/key-file/kf-persona.vala"
					_g_free0 (_data_->protocol1);
#line 136 "/run/build/folks/backends/key-file/kf-persona.vala"
					_g_object_unref0 (_data_->_protocol1_it);
#line 136 "/run/build/folks/backends/key-file/kf-persona.vala"
					g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error_->message, g_quark_to_string (_data_->_inner_error_->domain), _data_->_inner_error_->code);
#line 136 "/run/build/folks/backends/key-file/kf-persona.vala"
					g_clear_error (&_data_->_inner_error_);
#line 136 "/run/build/folks/backends/key-file/kf-persona.vala"
					g_object_unref (_data_->_async_result);
#line 136 "/run/build/folks/backends/key-file/kf-persona.vala"
					return FALSE;
#line 958 "kf-persona.c"
				}
			}
#line 134 "/run/build/folks/backends/key-file/kf-persona.vala"
			_g_free0 (_data_->protocol1);
#line 963 "kf-persona.c"
		}
#line 134 "/run/build/folks/backends/key-file/kf-persona.vala"
		_g_object_unref0 (_data_->_protocol1_it);
#line 967 "kf-persona.c"
	}
#line 149 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp15_ = gee_hash_multi_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, FOLKS_TYPE_IM_FIELD_DETAILS, (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, NULL, NULL, NULL, NULL, NULL, NULL, _folks_abstract_field_details_hash_static_gee_hash_data_func, NULL, NULL, _folks_abstract_field_details_equal_static_gee_equal_data_func, NULL, NULL);
#line 149 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->new_im_addresses = _data_->_tmp15_;
#line 973 "kf-persona.c"
	{
#line 153 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_tmp16_ = gee_multi_map_get_keys (_data_->im_addresses);
#line 153 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_tmp17_ = _data_->_tmp16_;
#line 153 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_tmp18_ = gee_iterable_iterator ((GeeIterable*) _data_->_tmp17_);
#line 153 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_tmp19_ = _data_->_tmp18_;
#line 153 "/run/build/folks/backends/key-file/kf-persona.vala"
		_g_object_unref0 (_data_->_tmp17_);
#line 153 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_protocol2_it = _data_->_tmp19_;
#line 153 "/run/build/folks/backends/key-file/kf-persona.vala"
		while (TRUE) {
#line 153 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp20_ = _data_->_protocol2_it;
#line 153 "/run/build/folks/backends/key-file/kf-persona.vala"
			if (!gee_iterator_next (_data_->_tmp20_)) {
#line 153 "/run/build/folks/backends/key-file/kf-persona.vala"
				break;
#line 995 "kf-persona.c"
			}
#line 153 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp21_ = _data_->_protocol2_it;
#line 153 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp22_ = gee_iterator_get (_data_->_tmp21_);
#line 153 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->protocol2 = (gchar*) _data_->_tmp22_;
#line 155 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp23_ = _data_->protocol2;
#line 155 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp24_ = gee_multi_map_get (_data_->im_addresses, _data_->_tmp23_);
#line 155 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->addresses = _data_->_tmp24_;
#line 156 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp25_ = folks_small_set_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, NULL, NULL, NULL, NULL, NULL, NULL);
#line 156 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->normalised_addresses = _data_->_tmp25_;
#line 1013 "kf-persona.c"
			{
#line 158 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_tmp26_ = _data_->addresses;
#line 158 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_tmp27_ = gee_iterable_iterator ((GeeIterable*) _data_->_tmp26_);
#line 158 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_im_fd_it = _data_->_tmp27_;
#line 158 "/run/build/folks/backends/key-file/kf-persona.vala"
				while (TRUE) {
#line 158 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp28_ = _data_->_im_fd_it;
#line 158 "/run/build/folks/backends/key-file/kf-persona.vala"
					if (!gee_iterator_next (_data_->_tmp28_)) {
#line 158 "/run/build/folks/backends/key-file/kf-persona.vala"
						break;
#line 1029 "kf-persona.c"
					}
#line 158 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp29_ = _data_->_im_fd_it;
#line 158 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp30_ = gee_iterator_get (_data_->_tmp29_);
#line 158 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->im_fd = (FolksImFieldDetails*) _data_->_tmp30_;
#line 1037 "kf-persona.c"
					{
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
						_data_->_tmp32_ = _data_->im_fd;
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
						_data_->_tmp33_ = folks_abstract_field_details_get_value ((FolksAbstractFieldDetails*) _data_->_tmp32_);
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
						_data_->_tmp34_ = _data_->_tmp33_;
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
						_data_->_tmp35_ = _data_->protocol2;
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
						_data_->_tmp36_ = folks_im_details_normalise_im_address ((const gchar*) _data_->_tmp34_, _data_->_tmp35_, &_data_->_inner_error_);
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
						_data_->_tmp31_ = _data_->_tmp36_;
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
						if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
							if (_data_->_inner_error_->domain == FOLKS_IM_DETAILS_ERROR) {
#line 1055 "kf-persona.c"
								goto __catch3_folks_im_details_error;
							}
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_free0 (_data_->normalised_address);
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_object_unref0 (_data_->im_fd);
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_object_unref0 (_data_->_im_fd_it);
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_object_unref0 (_data_->normalised_addresses);
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_object_unref0 (_data_->addresses);
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_free0 (_data_->protocol2);
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_object_unref0 (_data_->_protocol2_it);
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_object_unref0 (_data_->new_im_addresses);
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
							g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error_->message, g_quark_to_string (_data_->_inner_error_->domain), _data_->_inner_error_->code);
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
							g_clear_error (&_data_->_inner_error_);
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
							g_object_unref (_data_->_async_result);
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
							return FALSE;
#line 1082 "kf-persona.c"
						}
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
						_data_->_tmp37_ = _data_->_tmp31_;
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
						_data_->_tmp31_ = NULL;
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
						_g_free0 (_data_->normalised_address);
#line 163 "/run/build/folks/backends/key-file/kf-persona.vala"
						_data_->normalised_address = _data_->_tmp37_;
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
						_g_free0 (_data_->_tmp31_);
#line 1094 "kf-persona.c"
					}
					goto __finally3;
					__catch3_folks_im_details_error:
					{
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
						_data_->e2 = _data_->_inner_error_;
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
						_data_->_inner_error_ = NULL;
#line 168 "/run/build/folks/backends/key-file/kf-persona.vala"
						_data_->_tmp38_ = _data_->im_fd;
#line 168 "/run/build/folks/backends/key-file/kf-persona.vala"
						_data_->_tmp39_ = folks_abstract_field_details_get_value ((FolksAbstractFieldDetails*) _data_->_tmp38_);
#line 168 "/run/build/folks/backends/key-file/kf-persona.vala"
						_data_->_tmp40_ = _data_->_tmp39_;
#line 168 "/run/build/folks/backends/key-file/kf-persona.vala"
						_data_->_tmp41_ = _data_->protocol2;
#line 168 "/run/build/folks/backends/key-file/kf-persona.vala"
						_data_->_tmp42_ = _data_->e2;
#line 168 "/run/build/folks/backends/key-file/kf-persona.vala"
						_data_->_tmp43_ = _data_->_tmp42_->message;
#line 168 "/run/build/folks/backends/key-file/kf-persona.vala"
						_data_->_tmp44_ = g_error_new (FOLKS_PROPERTY_ERROR, FOLKS_PROPERTY_ERROR_INVALID_VALUE, _ ("Invalid IM address ‘%s’ for protocol ‘%s’: %s"), (const gchar*) _data_->_tmp40_, _data_->_tmp41_, _data_->_tmp43_);
#line 168 "/run/build/folks/backends/key-file/kf-persona.vala"
						_data_->_inner_error_ = _data_->_tmp44_;
#line 168 "/run/build/folks/backends/key-file/kf-persona.vala"
						_g_error_free0 (_data_->e2);
#line 1121 "kf-persona.c"
						goto __finally3;
					}
					__finally3:
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
					if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
						if (_data_->_inner_error_->domain == FOLKS_PROPERTY_ERROR) {
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							g_task_return_error (_data_->_async_result, _data_->_inner_error_);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_free0 (_data_->normalised_address);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_object_unref0 (_data_->im_fd);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_object_unref0 (_data_->_im_fd_it);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_object_unref0 (_data_->normalised_addresses);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_object_unref0 (_data_->addresses);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_free0 (_data_->protocol2);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_object_unref0 (_data_->_protocol2_it);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_object_unref0 (_data_->new_im_addresses);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							g_object_unref (_data_->_async_result);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							return FALSE;
#line 1151 "kf-persona.c"
						} else {
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_free0 (_data_->normalised_address);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_object_unref0 (_data_->im_fd);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_object_unref0 (_data_->_im_fd_it);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_object_unref0 (_data_->normalised_addresses);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_object_unref0 (_data_->addresses);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_free0 (_data_->protocol2);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_object_unref0 (_data_->_protocol2_it);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_object_unref0 (_data_->new_im_addresses);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error_->message, g_quark_to_string (_data_->_inner_error_->domain), _data_->_inner_error_->code);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							g_clear_error (&_data_->_inner_error_);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							g_object_unref (_data_->_async_result);
#line 161 "/run/build/folks/backends/key-file/kf-persona.vala"
							return FALSE;
#line 1177 "kf-persona.c"
						}
					}
#line 178 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp45_ = _data_->normalised_addresses;
#line 178 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp46_ = _data_->normalised_address;
#line 178 "/run/build/folks/backends/key-file/kf-persona.vala"
					gee_abstract_collection_add ((GeeAbstractCollection*) _data_->_tmp45_, _data_->_tmp46_);
#line 179 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp47_ = _data_->normalised_address;
#line 179 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp48_ = folks_im_field_details_new (_data_->_tmp47_, NULL);
#line 179 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->new_im_fd = _data_->_tmp48_;
#line 180 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp49_ = _data_->new_im_addresses;
#line 180 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp50_ = _data_->protocol2;
#line 180 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp51_ = _data_->new_im_fd;
#line 180 "/run/build/folks/backends/key-file/kf-persona.vala"
					gee_multi_map_set ((GeeMultiMap*) _data_->_tmp49_, _data_->_tmp50_, _data_->_tmp51_);
#line 158 "/run/build/folks/backends/key-file/kf-persona.vala"
					_g_object_unref0 (_data_->new_im_fd);
#line 158 "/run/build/folks/backends/key-file/kf-persona.vala"
					_g_free0 (_data_->normalised_address);
#line 158 "/run/build/folks/backends/key-file/kf-persona.vala"
					_g_object_unref0 (_data_->im_fd);
#line 1206 "kf-persona.c"
				}
#line 158 "/run/build/folks/backends/key-file/kf-persona.vala"
				_g_object_unref0 (_data_->_im_fd_it);
#line 1210 "kf-persona.c"
			}
#line 183 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp52_ = _data_->normalised_addresses;
#line 183 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp53_ = 0;
#line 183 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp54_ = gee_collection_to_array ((GeeCollection*) _data_->_tmp52_, &_data_->_tmp53_);
#line 183 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->addrs = (gchar**) _data_->_tmp54_;
#line 183 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->addrs_length1 = (_data_->_tmp53_ * sizeof (gchar*)) / sizeof (gchar*);
#line 183 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_addrs_size_ = _data_->addrs_length1;
#line 184 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp55_ = _data_->normalised_addresses;
#line 184 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp56_ = gee_collection_get_size ((GeeCollection*) _data_->_tmp55_);
#line 184 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp57_ = _data_->_tmp56_;
#line 184 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->addrs_length1 = _data_->_tmp57_;
#line 184 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp58_ = _data_->addrs_length1;
#line 186 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp59_ = _data_->key_file;
#line 186 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp60_ = folks_persona_get_display_id ((FolksPersona*) _data_->self);
#line 186 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp61_ = _data_->_tmp60_;
#line 186 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp62_ = _data_->protocol2;
#line 186 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp63_ = _data_->addrs;
#line 186 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp63__length1 = _data_->addrs_length1;
#line 186 "/run/build/folks/backends/key-file/kf-persona.vala"
			g_key_file_set_string_list (_data_->_tmp59_, _data_->_tmp61_, _data_->_tmp62_, (const gchar* const*) _data_->_tmp63_, _data_->_tmp63__length1);
#line 153 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->addrs = (_vala_array_free (_data_->addrs, _data_->addrs_length1, (GDestroyNotify) g_free), NULL);
#line 153 "/run/build/folks/backends/key-file/kf-persona.vala"
			_g_object_unref0 (_data_->normalised_addresses);
#line 153 "/run/build/folks/backends/key-file/kf-persona.vala"
			_g_object_unref0 (_data_->addresses);
#line 153 "/run/build/folks/backends/key-file/kf-persona.vala"
			_g_free0 (_data_->protocol2);
#line 1256 "kf-persona.c"
		}
#line 153 "/run/build/folks/backends/key-file/kf-persona.vala"
		_g_object_unref0 (_data_->_protocol2_it);
#line 1260 "kf-persona.c"
	}
#line 190 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp64_ = folks_persona_get_store ((FolksPersona*) _data_->self);
#line 190 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp65_ = _data_->_tmp64_;
#line 190 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_state_ = 1;
#line 190 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_store_save_key_file (G_TYPE_CHECK_INSTANCE_CAST (_data_->_tmp65_, FOLKS_BACKENDS_KF_TYPE_PERSONA_STORE, FolksBackendsKfPersonaStore), folks_backends_kf_persona_change_im_addresses_ready, _data_);
#line 190 "/run/build/folks/backends/key-file/kf-persona.vala"
	return FALSE;
#line 1272 "kf-persona.c"
	_state_1:
#line 190 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_store_save_key_file_finish (G_TYPE_CHECK_INSTANCE_CAST (_data_->_tmp65_, FOLKS_BACKENDS_KF_TYPE_PERSONA_STORE, FolksBackendsKfPersonaStore), _data_->_res_);
#line 192 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp66_ = _data_->new_im_addresses;
#line 192 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp67_ = _g_object_ref0 (_data_->_tmp66_);
#line 192 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (_data_->self->priv->_im_addresses);
#line 192 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->self->priv->_im_addresses = _data_->_tmp67_;
#line 193 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_object_notify ((GObject*) _data_->self, "im-addresses");
#line 128 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (_data_->new_im_addresses);
#line 128 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 128 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (_data_->_state_ != 0) {
#line 128 "/run/build/folks/backends/key-file/kf-persona.vala"
		while (_data_->_task_complete_ != TRUE) {
#line 128 "/run/build/folks/backends/key-file/kf-persona.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1296 "kf-persona.c"
		}
	}
#line 128 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_object_unref (_data_->_async_result);
#line 128 "/run/build/folks/backends/key-file/kf-persona.vala"
	return FALSE;
#line 1303 "kf-persona.c"
}


static void
folks_backends_kf_persona_real_change_web_service_addresses_data_free (gpointer _data)
{
	FolksBackendsKfPersonaChangeWebServiceAddressesData* _data_;
	_data_ = _data;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (_data_->web_service_addresses);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (_data_->self);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_slice_free (FolksBackendsKfPersonaChangeWebServiceAddressesData, _data_);
#line 1318 "kf-persona.c"
}


static void
folks_backends_kf_persona_real_change_web_service_addresses_async_ready_wrapper (GObject *source_object,
                                                                                 GAsyncResult *res,
                                                                                 void *user_data)
{
	FolksBackendsKfPersonaChangeWebServiceAddressesData* _task_data_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_task_data_ = g_task_get_task_data (G_TASK (res));
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (_task_data_->_callback_ != NULL) {
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		_task_data_->_callback_ (source_object, res, user_data);
#line 1334 "kf-persona.c"
	}
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_task_data_->_task_complete_ = TRUE;
#line 1338 "kf-persona.c"
}


static void
folks_backends_kf_persona_real_change_web_service_addresses (FolksWebServiceDetails* base,
                                                             GeeMultiMap* web_service_addresses,
                                                             GAsyncReadyCallback _callback_,
                                                             gpointer _user_data_)
{
	FolksBackendsKfPersona * self;
	FolksBackendsKfPersonaChangeWebServiceAddressesData* _data_;
	FolksBackendsKfPersona* _tmp0_;
	GeeMultiMap* _tmp1_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	self = (FolksBackendsKfPersona*) base;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_ = g_slice_new0 (FolksBackendsKfPersonaChangeWebServiceAddressesData);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_callback_ = _callback_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, folks_backends_kf_persona_real_change_web_service_addresses_async_ready_wrapper, _user_data_);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (_callback_ == NULL) {
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_task_complete_ = TRUE;
#line 1364 "kf-persona.c"
	}
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_task_set_task_data (_data_->_async_result, _data_, folks_backends_kf_persona_real_change_web_service_addresses_data_free);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->self = _tmp0_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp1_ = _g_object_ref0 (web_service_addresses);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (_data_->web_service_addresses);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->web_service_addresses = _tmp1_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_real_change_web_service_addresses_co (_data_);
#line 1380 "kf-persona.c"
}


static void
folks_backends_kf_persona_real_change_web_service_addresses_finish (FolksWebServiceDetails* base,
                                                                    GAsyncResult* _res_,
                                                                    GError** error)
{
	FolksBackendsKfPersonaChangeWebServiceAddressesData* _data_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (NULL == _data_) {
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		return;
#line 1396 "kf-persona.c"
	}
}


/**
   * {@inheritDoc}
   *
   * @since 0.6.2
   */
static void
_vala_array_add2 (gchar** * array,
                  int* length,
                  int* size,
                  gchar* value)
{
#line 245 "/run/build/folks/backends/key-file/kf-persona.vala"
	if ((*length) == (*size)) {
#line 245 "/run/build/folks/backends/key-file/kf-persona.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 245 "/run/build/folks/backends/key-file/kf-persona.vala"
		*array = g_renew (gchar*, *array, (*size) + 1);
#line 1418 "kf-persona.c"
	}
#line 245 "/run/build/folks/backends/key-file/kf-persona.vala"
	(*array)[(*length)++] = value;
#line 245 "/run/build/folks/backends/key-file/kf-persona.vala"
	(*array)[*length] = NULL;
#line 1424 "kf-persona.c"
}


static void
folks_backends_kf_persona_change_web_service_addresses_ready (GObject* source_object,
                                                              GAsyncResult* _res_,
                                                              gpointer _user_data_)
{
	FolksBackendsKfPersonaChangeWebServiceAddressesData* _data_;
#line 255 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_ = _user_data_;
#line 255 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_source_object_ = source_object;
#line 255 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_res_ = _res_;
#line 255 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_task_complete_ = TRUE;
#line 255 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_real_change_web_service_addresses_co (_data_);
#line 1444 "kf-persona.c"
}


static gboolean
folks_backends_kf_persona_real_change_web_service_addresses_co (FolksBackendsKfPersonaChangeWebServiceAddressesData* _data_)
{
#line 211 "/run/build/folks/backends/key-file/kf-persona.vala"
	switch (_data_->_state_) {
#line 211 "/run/build/folks/backends/key-file/kf-persona.vala"
		case 0:
#line 1455 "kf-persona.c"
		goto _state_0;
#line 211 "/run/build/folks/backends/key-file/kf-persona.vala"
		case 1:
#line 1459 "kf-persona.c"
		goto _state_1;
		default:
#line 211 "/run/build/folks/backends/key-file/kf-persona.vala"
		g_assert_not_reached ();
#line 1464 "kf-persona.c"
	}
	_state_0:
#line 215 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp0_ = folks_persona_get_store ((FolksPersona*) _data_->self);
#line 215 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp1_ = _data_->_tmp0_;
#line 215 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp2_ = folks_backends_kf_persona_store_get_key_file (G_TYPE_CHECK_INSTANCE_CAST (_data_->_tmp1_, FOLKS_BACKENDS_KF_TYPE_PERSONA_STORE, FolksBackendsKfPersonaStore));
#line 215 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->key_file = _data_->_tmp2_;
#line 1475 "kf-persona.c"
	{
#line 218 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_tmp3_ = _data_->self->priv->_web_service_addresses;
#line 218 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_tmp4_ = gee_multi_map_get_keys ((GeeMultiMap*) _data_->_tmp3_);
#line 218 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_tmp5_ = _data_->_tmp4_;
#line 218 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_tmp6_ = gee_iterable_iterator ((GeeIterable*) _data_->_tmp5_);
#line 218 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_tmp7_ = _data_->_tmp6_;
#line 218 "/run/build/folks/backends/key-file/kf-persona.vala"
		_g_object_unref0 (_data_->_tmp5_);
#line 218 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_web_service1_it = _data_->_tmp7_;
#line 218 "/run/build/folks/backends/key-file/kf-persona.vala"
		while (TRUE) {
#line 218 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp8_ = _data_->_web_service1_it;
#line 218 "/run/build/folks/backends/key-file/kf-persona.vala"
			if (!gee_iterator_next (_data_->_tmp8_)) {
#line 218 "/run/build/folks/backends/key-file/kf-persona.vala"
				break;
#line 1499 "kf-persona.c"
			}
#line 218 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp9_ = _data_->_web_service1_it;
#line 218 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp10_ = gee_iterator_get (_data_->_tmp9_);
#line 218 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->web_service1 = (gchar*) _data_->_tmp10_;
#line 1507 "kf-persona.c"
			{
#line 222 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_tmp11_ = _data_->key_file;
#line 222 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_tmp12_ = folks_persona_get_display_id ((FolksPersona*) _data_->self);
#line 222 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_tmp13_ = _data_->_tmp12_;
#line 222 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_tmp14_ = _data_->web_service1;
#line 222 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_tmp15_ = g_strconcat ("web-service.", _data_->_tmp14_, NULL);
#line 222 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_tmp16_ = _data_->_tmp15_;
#line 222 "/run/build/folks/backends/key-file/kf-persona.vala"
				g_key_file_remove_key (_data_->_tmp11_, _data_->_tmp13_, _data_->_tmp16_, &_data_->_inner_error_);
#line 222 "/run/build/folks/backends/key-file/kf-persona.vala"
				_g_free0 (_data_->_tmp16_);
#line 222 "/run/build/folks/backends/key-file/kf-persona.vala"
				if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 222 "/run/build/folks/backends/key-file/kf-persona.vala"
					if (_data_->_inner_error_->domain == G_KEY_FILE_ERROR) {
#line 1529 "kf-persona.c"
						goto __catch4_g_key_file_error;
					}
#line 222 "/run/build/folks/backends/key-file/kf-persona.vala"
					_g_free0 (_data_->web_service1);
#line 222 "/run/build/folks/backends/key-file/kf-persona.vala"
					_g_object_unref0 (_data_->_web_service1_it);
#line 222 "/run/build/folks/backends/key-file/kf-persona.vala"
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error_->message, g_quark_to_string (_data_->_inner_error_->domain), _data_->_inner_error_->code);
#line 222 "/run/build/folks/backends/key-file/kf-persona.vala"
					g_clear_error (&_data_->_inner_error_);
#line 222 "/run/build/folks/backends/key-file/kf-persona.vala"
					g_object_unref (_data_->_async_result);
#line 222 "/run/build/folks/backends/key-file/kf-persona.vala"
					return FALSE;
#line 1544 "kf-persona.c"
				}
			}
			goto __finally4;
			__catch4_g_key_file_error:
			{
#line 220 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->e = _data_->_inner_error_;
#line 220 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_inner_error_ = NULL;
#line 220 "/run/build/folks/backends/key-file/kf-persona.vala"
				_g_error_free0 (_data_->e);
#line 1556 "kf-persona.c"
			}
			__finally4:
#line 220 "/run/build/folks/backends/key-file/kf-persona.vala"
			if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 220 "/run/build/folks/backends/key-file/kf-persona.vala"
				if (_data_->_inner_error_->domain == FOLKS_PROPERTY_ERROR) {
#line 220 "/run/build/folks/backends/key-file/kf-persona.vala"
					g_task_return_error (_data_->_async_result, _data_->_inner_error_);
#line 220 "/run/build/folks/backends/key-file/kf-persona.vala"
					_g_free0 (_data_->web_service1);
#line 220 "/run/build/folks/backends/key-file/kf-persona.vala"
					_g_object_unref0 (_data_->_web_service1_it);
#line 220 "/run/build/folks/backends/key-file/kf-persona.vala"
					g_object_unref (_data_->_async_result);
#line 220 "/run/build/folks/backends/key-file/kf-persona.vala"
					return FALSE;
#line 1573 "kf-persona.c"
				} else {
#line 220 "/run/build/folks/backends/key-file/kf-persona.vala"
					_g_free0 (_data_->web_service1);
#line 220 "/run/build/folks/backends/key-file/kf-persona.vala"
					_g_object_unref0 (_data_->_web_service1_it);
#line 220 "/run/build/folks/backends/key-file/kf-persona.vala"
					g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error_->message, g_quark_to_string (_data_->_inner_error_->domain), _data_->_inner_error_->code);
#line 220 "/run/build/folks/backends/key-file/kf-persona.vala"
					g_clear_error (&_data_->_inner_error_);
#line 220 "/run/build/folks/backends/key-file/kf-persona.vala"
					g_object_unref (_data_->_async_result);
#line 220 "/run/build/folks/backends/key-file/kf-persona.vala"
					return FALSE;
#line 1587 "kf-persona.c"
				}
			}
#line 218 "/run/build/folks/backends/key-file/kf-persona.vala"
			_g_free0 (_data_->web_service1);
#line 1592 "kf-persona.c"
		}
#line 218 "/run/build/folks/backends/key-file/kf-persona.vala"
		_g_object_unref0 (_data_->_web_service1_it);
#line 1596 "kf-persona.c"
	}
#line 234 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp17_ = gee_hash_multi_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, FOLKS_TYPE_WEB_SERVICE_FIELD_DETAILS, (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, NULL, NULL, NULL, NULL, NULL, NULL, _folks_abstract_field_details_hash_static_gee_hash_data_func, NULL, NULL, _folks_abstract_field_details_equal_static_gee_equal_data_func, NULL, NULL);
#line 234 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->new_web_service_addresses = _data_->_tmp17_;
#line 1602 "kf-persona.c"
	{
#line 239 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_tmp18_ = gee_multi_map_get_keys (_data_->web_service_addresses);
#line 239 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_tmp19_ = _data_->_tmp18_;
#line 239 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_tmp20_ = gee_iterable_iterator ((GeeIterable*) _data_->_tmp19_);
#line 239 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_tmp21_ = _data_->_tmp20_;
#line 239 "/run/build/folks/backends/key-file/kf-persona.vala"
		_g_object_unref0 (_data_->_tmp19_);
#line 239 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_web_service2_it = _data_->_tmp21_;
#line 239 "/run/build/folks/backends/key-file/kf-persona.vala"
		while (TRUE) {
#line 239 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp22_ = _data_->_web_service2_it;
#line 239 "/run/build/folks/backends/key-file/kf-persona.vala"
			if (!gee_iterator_next (_data_->_tmp22_)) {
#line 239 "/run/build/folks/backends/key-file/kf-persona.vala"
				break;
#line 1624 "kf-persona.c"
			}
#line 239 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp23_ = _data_->_web_service2_it;
#line 239 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp24_ = gee_iterator_get (_data_->_tmp23_);
#line 239 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->web_service2 = (gchar*) _data_->_tmp24_;
#line 241 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp25_ = _data_->web_service2;
#line 241 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp26_ = gee_multi_map_get (_data_->web_service_addresses, _data_->_tmp25_);
#line 241 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->ws_fds = _data_->_tmp26_;
#line 243 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp27_ = g_new0 (gchar*, 0 + 1);
#line 243 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->addrs = _data_->_tmp27_;
#line 243 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->addrs_length1 = 0;
#line 243 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_addrs_size_ = _data_->addrs_length1;
#line 1646 "kf-persona.c"
			{
#line 244 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_tmp28_ = _data_->ws_fds;
#line 244 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_tmp29_ = gee_iterable_iterator ((GeeIterable*) _data_->_tmp28_);
#line 244 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_ws_fd1_it = _data_->_tmp29_;
#line 244 "/run/build/folks/backends/key-file/kf-persona.vala"
				while (TRUE) {
#line 244 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp30_ = _data_->_ws_fd1_it;
#line 244 "/run/build/folks/backends/key-file/kf-persona.vala"
					if (!gee_iterator_next (_data_->_tmp30_)) {
#line 244 "/run/build/folks/backends/key-file/kf-persona.vala"
						break;
#line 1662 "kf-persona.c"
					}
#line 244 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp31_ = _data_->_ws_fd1_it;
#line 244 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp32_ = gee_iterator_get (_data_->_tmp31_);
#line 244 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->ws_fd1 = (FolksWebServiceFieldDetails*) _data_->_tmp32_;
#line 245 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp33_ = _data_->addrs;
#line 245 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp33__length1 = _data_->addrs_length1;
#line 245 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp34_ = _data_->ws_fd1;
#line 245 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp35_ = folks_abstract_field_details_get_value ((FolksAbstractFieldDetails*) _data_->_tmp34_);
#line 245 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp36_ = _data_->_tmp35_;
#line 245 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp37_ = g_strdup ((const gchar*) _data_->_tmp36_);
#line 245 "/run/build/folks/backends/key-file/kf-persona.vala"
					_vala_array_add2 (&_data_->addrs, &_data_->addrs_length1, &_data_->_addrs_size_, _data_->_tmp37_);
#line 244 "/run/build/folks/backends/key-file/kf-persona.vala"
					_g_object_unref0 (_data_->ws_fd1);
#line 1686 "kf-persona.c"
				}
#line 244 "/run/build/folks/backends/key-file/kf-persona.vala"
				_g_object_unref0 (_data_->_ws_fd1_it);
#line 1690 "kf-persona.c"
			}
#line 247 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp38_ = _data_->key_file;
#line 247 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp39_ = folks_persona_get_display_id ((FolksPersona*) _data_->self);
#line 247 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp40_ = _data_->_tmp39_;
#line 247 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp41_ = _data_->web_service2;
#line 247 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp42_ = g_strconcat ("web-service.", _data_->_tmp41_, NULL);
#line 247 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp43_ = _data_->_tmp42_;
#line 247 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp44_ = _data_->addrs;
#line 247 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->_tmp44__length1 = _data_->addrs_length1;
#line 247 "/run/build/folks/backends/key-file/kf-persona.vala"
			g_key_file_set_string_list (_data_->_tmp38_, _data_->_tmp40_, _data_->_tmp43_, (const gchar* const*) _data_->_tmp44_, _data_->_tmp44__length1);
#line 247 "/run/build/folks/backends/key-file/kf-persona.vala"
			_g_free0 (_data_->_tmp43_);
#line 1712 "kf-persona.c"
			{
#line 250 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_tmp45_ = _data_->ws_fds;
#line 250 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_tmp46_ = gee_iterable_iterator ((GeeIterable*) _data_->_tmp45_);
#line 250 "/run/build/folks/backends/key-file/kf-persona.vala"
				_data_->_ws_fd2_it = _data_->_tmp46_;
#line 250 "/run/build/folks/backends/key-file/kf-persona.vala"
				while (TRUE) {
#line 250 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp47_ = _data_->_ws_fd2_it;
#line 250 "/run/build/folks/backends/key-file/kf-persona.vala"
					if (!gee_iterator_next (_data_->_tmp47_)) {
#line 250 "/run/build/folks/backends/key-file/kf-persona.vala"
						break;
#line 1728 "kf-persona.c"
					}
#line 250 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp48_ = _data_->_ws_fd2_it;
#line 250 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp49_ = gee_iterator_get (_data_->_tmp48_);
#line 250 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->ws_fd2 = (FolksWebServiceFieldDetails*) _data_->_tmp49_;
#line 251 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp50_ = _data_->new_web_service_addresses;
#line 251 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp51_ = _data_->web_service2;
#line 251 "/run/build/folks/backends/key-file/kf-persona.vala"
					_data_->_tmp52_ = _data_->ws_fd2;
#line 251 "/run/build/folks/backends/key-file/kf-persona.vala"
					gee_multi_map_set ((GeeMultiMap*) _data_->_tmp50_, _data_->_tmp51_, _data_->_tmp52_);
#line 250 "/run/build/folks/backends/key-file/kf-persona.vala"
					_g_object_unref0 (_data_->ws_fd2);
#line 1746 "kf-persona.c"
				}
#line 250 "/run/build/folks/backends/key-file/kf-persona.vala"
				_g_object_unref0 (_data_->_ws_fd2_it);
#line 1750 "kf-persona.c"
			}
#line 239 "/run/build/folks/backends/key-file/kf-persona.vala"
			_data_->addrs = (_vala_array_free (_data_->addrs, _data_->addrs_length1, (GDestroyNotify) g_free), NULL);
#line 239 "/run/build/folks/backends/key-file/kf-persona.vala"
			_g_object_unref0 (_data_->ws_fds);
#line 239 "/run/build/folks/backends/key-file/kf-persona.vala"
			_g_free0 (_data_->web_service2);
#line 1758 "kf-persona.c"
		}
#line 239 "/run/build/folks/backends/key-file/kf-persona.vala"
		_g_object_unref0 (_data_->_web_service2_it);
#line 1762 "kf-persona.c"
	}
#line 255 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp53_ = folks_persona_get_store ((FolksPersona*) _data_->self);
#line 255 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp54_ = _data_->_tmp53_;
#line 255 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_state_ = 1;
#line 255 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_store_save_key_file (G_TYPE_CHECK_INSTANCE_CAST (_data_->_tmp54_, FOLKS_BACKENDS_KF_TYPE_PERSONA_STORE, FolksBackendsKfPersonaStore), folks_backends_kf_persona_change_web_service_addresses_ready, _data_);
#line 255 "/run/build/folks/backends/key-file/kf-persona.vala"
	return FALSE;
#line 1774 "kf-persona.c"
	_state_1:
#line 255 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_store_save_key_file_finish (G_TYPE_CHECK_INSTANCE_CAST (_data_->_tmp54_, FOLKS_BACKENDS_KF_TYPE_PERSONA_STORE, FolksBackendsKfPersonaStore), _data_->_res_);
#line 257 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp55_ = _data_->new_web_service_addresses;
#line 257 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp56_ = _g_object_ref0 (_data_->_tmp55_);
#line 257 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (_data_->self->priv->_web_service_addresses);
#line 257 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->self->priv->_web_service_addresses = _data_->_tmp56_;
#line 258 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_object_notify ((GObject*) _data_->self, "web-service-addresses");
#line 211 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (_data_->new_web_service_addresses);
#line 211 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 211 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (_data_->_state_ != 0) {
#line 211 "/run/build/folks/backends/key-file/kf-persona.vala"
		while (_data_->_task_complete_ != TRUE) {
#line 211 "/run/build/folks/backends/key-file/kf-persona.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1798 "kf-persona.c"
		}
	}
#line 211 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_object_unref (_data_->_async_result);
#line 211 "/run/build/folks/backends/key-file/kf-persona.vala"
	return FALSE;
#line 1805 "kf-persona.c"
}


static void
folks_backends_kf_persona_real_change_anti_links_data_free (gpointer _data)
{
	FolksBackendsKfPersonaChangeAntiLinksData* _data_;
	_data_ = _data;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (_data_->anti_links);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (_data_->self);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_slice_free (FolksBackendsKfPersonaChangeAntiLinksData, _data_);
#line 1820 "kf-persona.c"
}


static void
folks_backends_kf_persona_real_change_anti_links_async_ready_wrapper (GObject *source_object,
                                                                      GAsyncResult *res,
                                                                      void *user_data)
{
	FolksBackendsKfPersonaChangeAntiLinksData* _task_data_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_task_data_ = g_task_get_task_data (G_TASK (res));
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (_task_data_->_callback_ != NULL) {
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		_task_data_->_callback_ (source_object, res, user_data);
#line 1836 "kf-persona.c"
	}
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_task_data_->_task_complete_ = TRUE;
#line 1840 "kf-persona.c"
}


static void
folks_backends_kf_persona_real_change_anti_links (FolksAntiLinkable* base,
                                                  GeeSet* anti_links,
                                                  GAsyncReadyCallback _callback_,
                                                  gpointer _user_data_)
{
	FolksBackendsKfPersona * self;
	FolksBackendsKfPersonaChangeAntiLinksData* _data_;
	FolksBackendsKfPersona* _tmp0_;
	GeeSet* _tmp1_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	self = (FolksBackendsKfPersona*) base;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_ = g_slice_new0 (FolksBackendsKfPersonaChangeAntiLinksData);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_callback_ = _callback_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, folks_backends_kf_persona_real_change_anti_links_async_ready_wrapper, _user_data_);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (_callback_ == NULL) {
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		_data_->_task_complete_ = TRUE;
#line 1866 "kf-persona.c"
	}
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_task_set_task_data (_data_->_async_result, _data_, folks_backends_kf_persona_real_change_anti_links_data_free);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->self = _tmp0_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp1_ = _g_object_ref0 (anti_links);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (_data_->anti_links);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->anti_links = _tmp1_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_real_change_anti_links_co (_data_);
#line 1882 "kf-persona.c"
}


static void
folks_backends_kf_persona_real_change_anti_links_finish (FolksAntiLinkable* base,
                                                         GAsyncResult* _res_,
                                                         GError** error)
{
	FolksBackendsKfPersonaChangeAntiLinksData* _data_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (NULL == _data_) {
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		return;
#line 1898 "kf-persona.c"
	}
}


/**
   * {@inheritDoc}
   *
   * @since 0.7.3
   */
static void
folks_backends_kf_persona_change_anti_links_ready (GObject* source_object,
                                                   GAsyncResult* _res_,
                                                   gpointer _user_data_)
{
	FolksBackendsKfPersonaChangeAntiLinksData* _data_;
#line 298 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_ = _user_data_;
#line 298 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_source_object_ = source_object;
#line 298 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_res_ = _res_;
#line 298 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_task_complete_ = TRUE;
#line 298 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_real_change_anti_links_co (_data_);
#line 1924 "kf-persona.c"
}


static gboolean
folks_backends_kf_persona_real_change_anti_links_co (FolksBackendsKfPersonaChangeAntiLinksData* _data_)
{
#line 281 "/run/build/folks/backends/key-file/kf-persona.vala"
	switch (_data_->_state_) {
#line 281 "/run/build/folks/backends/key-file/kf-persona.vala"
		case 0:
#line 1935 "kf-persona.c"
		goto _state_0;
#line 281 "/run/build/folks/backends/key-file/kf-persona.vala"
		case 1:
#line 1939 "kf-persona.c"
		goto _state_1;
		default:
#line 281 "/run/build/folks/backends/key-file/kf-persona.vala"
		g_assert_not_reached ();
#line 1944 "kf-persona.c"
	}
	_state_0:
#line 284 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp0_ = folks_anti_linkable_get_anti_links ((FolksAntiLinkable*) _data_->self);
#line 284 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp1_ = _data_->_tmp0_;
#line 284 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (folks_internal_equal_sets (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, _data_->anti_links, _data_->_tmp1_)) {
#line 286 "/run/build/folks/backends/key-file/kf-persona.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 286 "/run/build/folks/backends/key-file/kf-persona.vala"
		if (_data_->_state_ != 0) {
#line 286 "/run/build/folks/backends/key-file/kf-persona.vala"
			while (_data_->_task_complete_ != TRUE) {
#line 286 "/run/build/folks/backends/key-file/kf-persona.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1961 "kf-persona.c"
			}
		}
#line 286 "/run/build/folks/backends/key-file/kf-persona.vala"
		g_object_unref (_data_->_async_result);
#line 286 "/run/build/folks/backends/key-file/kf-persona.vala"
		return FALSE;
#line 1968 "kf-persona.c"
	}
#line 289 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp2_ = folks_persona_get_store ((FolksPersona*) _data_->self);
#line 289 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp3_ = _data_->_tmp2_;
#line 289 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp4_ = folks_backends_kf_persona_store_get_key_file (G_TYPE_CHECK_INSTANCE_CAST (_data_->_tmp3_, FOLKS_BACKENDS_KF_TYPE_PERSONA_STORE, FolksBackendsKfPersonaStore));
#line 289 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->key_file = _data_->_tmp4_;
#line 292 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp5_ = folks_persona_get_uid ((FolksPersona*) _data_->self);
#line 292 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp6_ = _data_->_tmp5_;
#line 292 "/run/build/folks/backends/key-file/kf-persona.vala"
	gee_collection_remove ((GeeCollection*) _data_->anti_links, _data_->_tmp6_);
#line 294 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp7_ = _data_->key_file;
#line 294 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp8_ = folks_persona_get_display_id ((FolksPersona*) _data_->self);
#line 294 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp9_ = _data_->_tmp8_;
#line 294 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp10_ = 0;
#line 294 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp11_ = gee_collection_to_array ((GeeCollection*) _data_->anti_links, &_data_->_tmp10_);
#line 294 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp12_ = _data_->_tmp11_;
#line 294 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp12__length1 = _data_->_tmp10_;
#line 294 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_key_file_set_string_list (_data_->_tmp7_, _data_->_tmp9_, FOLKS_BACKENDS_KF_PERSONA_STORE_anti_links_key_name, (const gchar* const*) _data_->_tmp12_, _data_->_tmp10_);
#line 294 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp12_ = (_vala_array_free (_data_->_tmp12_, _data_->_tmp12__length1, (GDestroyNotify) g_free), NULL);
#line 298 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp13_ = folks_persona_get_store ((FolksPersona*) _data_->self);
#line 298 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp14_ = _data_->_tmp13_;
#line 298 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_state_ = 1;
#line 298 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_store_save_key_file (G_TYPE_CHECK_INSTANCE_CAST (_data_->_tmp14_, FOLKS_BACKENDS_KF_TYPE_PERSONA_STORE, FolksBackendsKfPersonaStore), folks_backends_kf_persona_change_anti_links_ready, _data_);
#line 298 "/run/build/folks/backends/key-file/kf-persona.vala"
	return FALSE;
#line 2012 "kf-persona.c"
	_state_1:
#line 298 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_store_save_key_file_finish (G_TYPE_CHECK_INSTANCE_CAST (_data_->_tmp14_, FOLKS_BACKENDS_KF_TYPE_PERSONA_STORE, FolksBackendsKfPersonaStore), _data_->_res_);
#line 301 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp15_ = _data_->self->priv->_anti_links;
#line 301 "/run/build/folks/backends/key-file/kf-persona.vala"
	gee_abstract_collection_clear ((GeeAbstractCollection*) _data_->_tmp15_);
#line 302 "/run/build/folks/backends/key-file/kf-persona.vala"
	_data_->_tmp16_ = _data_->self->priv->_anti_links;
#line 302 "/run/build/folks/backends/key-file/kf-persona.vala"
	gee_collection_add_all ((GeeCollection*) _data_->_tmp16_, (GeeCollection*) _data_->anti_links);
#line 303 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_object_notify ((GObject*) _data_->self, "anti-links");
#line 281 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 281 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (_data_->_state_ != 0) {
#line 281 "/run/build/folks/backends/key-file/kf-persona.vala"
		while (_data_->_task_complete_ != TRUE) {
#line 281 "/run/build/folks/backends/key-file/kf-persona.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2034 "kf-persona.c"
		}
	}
#line 281 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_object_unref (_data_->_async_result);
#line 281 "/run/build/folks/backends/key-file/kf-persona.vala"
	return FALSE;
#line 2041 "kf-persona.c"
}


/**
   * Create a new persona.
   *
   * Create a new persona for the {@link PersonaStore} ``store``, representing
   * the Persona given by the group ``uid`` in the key file ``key_file``.
   */
FolksBackendsKfPersona*
folks_backends_kf_persona_construct (GType object_type,
                                     const gchar* id,
                                     FolksPersonaStore* store)
{
	FolksBackendsKfPersona * self = NULL;
	gchar* iid = NULL;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	gchar* _tmp5_;
	gchar* uid = NULL;
	const gchar* _tmp6_;
	const gchar* _tmp7_;
	gchar* _tmp8_;
#line 312 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_return_val_if_fail (id != NULL, NULL);
#line 312 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_return_val_if_fail (store != NULL, NULL);
#line 314 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp0_ = folks_persona_store_get_id (store);
#line 314 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp1_ = _tmp0_;
#line 314 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp2_ = g_strconcat (_tmp1_, ":", NULL);
#line 314 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp3_ = _tmp2_;
#line 314 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp4_ = g_strconcat (_tmp3_, id, NULL);
#line 314 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp5_ = _tmp4_;
#line 314 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_free0 (_tmp3_);
#line 314 "/run/build/folks/backends/key-file/kf-persona.vala"
	iid = _tmp5_;
#line 315 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp6_ = folks_persona_store_get_id (store);
#line 315 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp7_ = _tmp6_;
#line 315 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp8_ = folks_persona_build_uid ("key-file", _tmp7_, id);
#line 315 "/run/build/folks/backends/key-file/kf-persona.vala"
	uid = _tmp8_;
#line 317 "/run/build/folks/backends/key-file/kf-persona.vala"
	self = (FolksBackendsKfPersona*) g_object_new (object_type, "display-id", id, "iid", iid, "uid", uid, "store", store, "is-user", FALSE, NULL);
#line 312 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_free0 (uid);
#line 312 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_free0 (iid);
#line 312 "/run/build/folks/backends/key-file/kf-persona.vala"
	return self;
#line 2104 "kf-persona.c"
}


FolksBackendsKfPersona*
folks_backends_kf_persona_new (const gchar* id,
                               FolksPersonaStore* store)
{
#line 312 "/run/build/folks/backends/key-file/kf-persona.vala"
	return folks_backends_kf_persona_construct (FOLKS_BACKENDS_KF_TYPE_PERSONA, id, store);
#line 2114 "kf-persona.c"
}


/**
   * {@inheritDoc}
   */
static void
folks_backends_kf_persona_real_linkable_property_to_links (FolksPersona* base,
                                                           const gchar* prop_name,
                                                           FolksPersonaLinkablePropertyCallback callback,
                                                           gpointer callback_target)
{
	FolksBackendsKfPersona * self;
#line 440 "/run/build/folks/backends/key-file/kf-persona.vala"
	self = (FolksBackendsKfPersona*) base;
#line 440 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_return_if_fail (prop_name != NULL);
#line 443 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (g_strcmp0 (prop_name, "im-addresses") == 0) {
#line 2134 "kf-persona.c"
		GeeMapIterator* iter = NULL;
		GeeHashMultiMap* _tmp0_;
		GeeMapIterator* _tmp1_;
#line 445 "/run/build/folks/backends/key-file/kf-persona.vala"
		_tmp0_ = self->priv->_im_addresses;
#line 445 "/run/build/folks/backends/key-file/kf-persona.vala"
		_tmp1_ = gee_multi_map_map_iterator ((GeeMultiMap*) _tmp0_);
#line 445 "/run/build/folks/backends/key-file/kf-persona.vala"
		iter = _tmp1_;
#line 447 "/run/build/folks/backends/key-file/kf-persona.vala"
		while (TRUE) {
#line 2146 "kf-persona.c"
			GeeMapIterator* _tmp2_;
			GeeMapIterator* _tmp3_;
			gpointer _tmp4_;
			gchar* _tmp5_;
			gchar* _tmp6_;
			gchar* _tmp7_;
			GeeMapIterator* _tmp8_;
			gpointer _tmp9_;
			FolksImFieldDetails* _tmp10_;
			gconstpointer _tmp11_;
			const gchar* _tmp12_;
			gchar* _tmp13_;
			gchar* _tmp14_;
#line 447 "/run/build/folks/backends/key-file/kf-persona.vala"
			_tmp2_ = iter;
#line 447 "/run/build/folks/backends/key-file/kf-persona.vala"
			if (!gee_map_iterator_next (_tmp2_)) {
#line 447 "/run/build/folks/backends/key-file/kf-persona.vala"
				break;
#line 2166 "kf-persona.c"
			}
#line 448 "/run/build/folks/backends/key-file/kf-persona.vala"
			_tmp3_ = iter;
#line 448 "/run/build/folks/backends/key-file/kf-persona.vala"
			_tmp4_ = gee_map_iterator_get_key (_tmp3_);
#line 448 "/run/build/folks/backends/key-file/kf-persona.vala"
			_tmp5_ = (gchar*) _tmp4_;
#line 448 "/run/build/folks/backends/key-file/kf-persona.vala"
			_tmp6_ = g_strconcat (_tmp5_, ":", NULL);
#line 448 "/run/build/folks/backends/key-file/kf-persona.vala"
			_tmp7_ = _tmp6_;
#line 448 "/run/build/folks/backends/key-file/kf-persona.vala"
			_tmp8_ = iter;
#line 448 "/run/build/folks/backends/key-file/kf-persona.vala"
			_tmp9_ = gee_map_iterator_get_value (_tmp8_);
#line 448 "/run/build/folks/backends/key-file/kf-persona.vala"
			_tmp10_ = (FolksImFieldDetails*) _tmp9_;
#line 448 "/run/build/folks/backends/key-file/kf-persona.vala"
			_tmp11_ = folks_abstract_field_details_get_value ((FolksAbstractFieldDetails*) _tmp10_);
#line 448 "/run/build/folks/backends/key-file/kf-persona.vala"
			_tmp12_ = _tmp11_;
#line 448 "/run/build/folks/backends/key-file/kf-persona.vala"
			_tmp13_ = g_strconcat (_tmp7_, (const gchar*) _tmp12_, NULL);
#line 448 "/run/build/folks/backends/key-file/kf-persona.vala"
			_tmp14_ = _tmp13_;
#line 448 "/run/build/folks/backends/key-file/kf-persona.vala"
			callback (_tmp14_, callback_target);
#line 448 "/run/build/folks/backends/key-file/kf-persona.vala"
			_g_free0 (_tmp14_);
#line 448 "/run/build/folks/backends/key-file/kf-persona.vala"
			_g_object_unref0 (_tmp10_);
#line 448 "/run/build/folks/backends/key-file/kf-persona.vala"
			_g_free0 (_tmp7_);
#line 448 "/run/build/folks/backends/key-file/kf-persona.vala"
			_g_free0 (_tmp5_);
#line 2202 "kf-persona.c"
		}
#line 443 "/run/build/folks/backends/key-file/kf-persona.vala"
		_g_object_unref0 (iter);
#line 2206 "kf-persona.c"
	} else {
#line 450 "/run/build/folks/backends/key-file/kf-persona.vala"
		if (g_strcmp0 (prop_name, "web-service-addresses") == 0) {
#line 2210 "kf-persona.c"
			GeeMapIterator* iter = NULL;
			GeeMultiMap* _tmp15_;
			GeeMultiMap* _tmp16_;
			GeeMapIterator* _tmp17_;
#line 452 "/run/build/folks/backends/key-file/kf-persona.vala"
			_tmp15_ = folks_web_service_details_get_web_service_addresses ((FolksWebServiceDetails*) self);
#line 452 "/run/build/folks/backends/key-file/kf-persona.vala"
			_tmp16_ = _tmp15_;
#line 452 "/run/build/folks/backends/key-file/kf-persona.vala"
			_tmp17_ = gee_multi_map_map_iterator (_tmp16_);
#line 452 "/run/build/folks/backends/key-file/kf-persona.vala"
			iter = _tmp17_;
#line 454 "/run/build/folks/backends/key-file/kf-persona.vala"
			while (TRUE) {
#line 2225 "kf-persona.c"
				GeeMapIterator* _tmp18_;
				GeeMapIterator* _tmp19_;
				gpointer _tmp20_;
				gchar* _tmp21_;
				gchar* _tmp22_;
				gchar* _tmp23_;
				GeeMapIterator* _tmp24_;
				gpointer _tmp25_;
				FolksWebServiceFieldDetails* _tmp26_;
				gconstpointer _tmp27_;
				const gchar* _tmp28_;
				gchar* _tmp29_;
				gchar* _tmp30_;
#line 454 "/run/build/folks/backends/key-file/kf-persona.vala"
				_tmp18_ = iter;
#line 454 "/run/build/folks/backends/key-file/kf-persona.vala"
				if (!gee_map_iterator_next (_tmp18_)) {
#line 454 "/run/build/folks/backends/key-file/kf-persona.vala"
					break;
#line 2245 "kf-persona.c"
				}
#line 455 "/run/build/folks/backends/key-file/kf-persona.vala"
				_tmp19_ = iter;
#line 455 "/run/build/folks/backends/key-file/kf-persona.vala"
				_tmp20_ = gee_map_iterator_get_key (_tmp19_);
#line 455 "/run/build/folks/backends/key-file/kf-persona.vala"
				_tmp21_ = (gchar*) _tmp20_;
#line 455 "/run/build/folks/backends/key-file/kf-persona.vala"
				_tmp22_ = g_strconcat (_tmp21_, ":", NULL);
#line 455 "/run/build/folks/backends/key-file/kf-persona.vala"
				_tmp23_ = _tmp22_;
#line 455 "/run/build/folks/backends/key-file/kf-persona.vala"
				_tmp24_ = iter;
#line 455 "/run/build/folks/backends/key-file/kf-persona.vala"
				_tmp25_ = gee_map_iterator_get_value (_tmp24_);
#line 455 "/run/build/folks/backends/key-file/kf-persona.vala"
				_tmp26_ = (FolksWebServiceFieldDetails*) _tmp25_;
#line 455 "/run/build/folks/backends/key-file/kf-persona.vala"
				_tmp27_ = folks_abstract_field_details_get_value ((FolksAbstractFieldDetails*) _tmp26_);
#line 455 "/run/build/folks/backends/key-file/kf-persona.vala"
				_tmp28_ = _tmp27_;
#line 455 "/run/build/folks/backends/key-file/kf-persona.vala"
				_tmp29_ = g_strconcat (_tmp23_, (const gchar*) _tmp28_, NULL);
#line 455 "/run/build/folks/backends/key-file/kf-persona.vala"
				_tmp30_ = _tmp29_;
#line 455 "/run/build/folks/backends/key-file/kf-persona.vala"
				callback (_tmp30_, callback_target);
#line 455 "/run/build/folks/backends/key-file/kf-persona.vala"
				_g_free0 (_tmp30_);
#line 455 "/run/build/folks/backends/key-file/kf-persona.vala"
				_g_object_unref0 (_tmp26_);
#line 455 "/run/build/folks/backends/key-file/kf-persona.vala"
				_g_free0 (_tmp23_);
#line 455 "/run/build/folks/backends/key-file/kf-persona.vala"
				_g_free0 (_tmp21_);
#line 2281 "kf-persona.c"
			}
#line 450 "/run/build/folks/backends/key-file/kf-persona.vala"
			_g_object_unref0 (iter);
#line 2285 "kf-persona.c"
		} else {
#line 460 "/run/build/folks/backends/key-file/kf-persona.vala"
			FOLKS_PERSONA_CLASS (folks_backends_kf_persona_parent_class)->linkable_property_to_links (G_TYPE_CHECK_INSTANCE_CAST (self, FOLKS_TYPE_PERSONA, FolksPersona), prop_name, callback, callback_target);
#line 2289 "kf-persona.c"
		}
	}
}


static gchar**
folks_backends_kf_persona_real_get_linkable_properties (FolksPersona* base,
                                                        int* result_length1)
{
	gchar** result;
	FolksBackendsKfPersona* self;
	gchar** _tmp0_;
	gint _tmp0__length1;
#line 60 "/run/build/folks/backends/key-file/kf-persona.vala"
	self = (FolksBackendsKfPersona*) base;
#line 60 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp0_ = FOLKS_BACKENDS_KF_PERSONA__linkable_properties;
#line 60 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp0__length1 = G_N_ELEMENTS (FOLKS_BACKENDS_KF_PERSONA__linkable_properties);
#line 60 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (result_length1) {
#line 60 "/run/build/folks/backends/key-file/kf-persona.vala"
		*result_length1 = _tmp0__length1;
#line 2313 "kf-persona.c"
	}
#line 60 "/run/build/folks/backends/key-file/kf-persona.vala"
	result = _tmp0_;
#line 60 "/run/build/folks/backends/key-file/kf-persona.vala"
	return result;
#line 2319 "kf-persona.c"
}


static gchar**
folks_backends_kf_persona_real_get_writeable_properties (FolksPersona* base,
                                                         int* result_length1)
{
	gchar** result;
	FolksBackendsKfPersona* self;
	gchar** _tmp0_;
	gint _tmp0__length1;
#line 70 "/run/build/folks/backends/key-file/kf-persona.vala"
	self = (FolksBackendsKfPersona*) base;
#line 70 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp0_ = FOLKS_BACKENDS_KF_PERSONA__writeable_properties;
#line 70 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp0__length1 = G_N_ELEMENTS (FOLKS_BACKENDS_KF_PERSONA__writeable_properties);
#line 70 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (result_length1) {
#line 70 "/run/build/folks/backends/key-file/kf-persona.vala"
		*result_length1 = _tmp0__length1;
#line 2341 "kf-persona.c"
	}
#line 70 "/run/build/folks/backends/key-file/kf-persona.vala"
	result = _tmp0_;
#line 70 "/run/build/folks/backends/key-file/kf-persona.vala"
	return result;
#line 2347 "kf-persona.c"
}


static const gchar*
folks_backends_kf_persona_real_get_alias (FolksAliasDetails* base)
{
	const gchar* result;
	FolksBackendsKfPersona* self;
	const gchar* _tmp0_;
#line 81 "/run/build/folks/backends/key-file/kf-persona.vala"
	self = (FolksBackendsKfPersona*) base;
#line 81 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp0_ = self->priv->_alias;
#line 81 "/run/build/folks/backends/key-file/kf-persona.vala"
	result = _tmp0_;
#line 81 "/run/build/folks/backends/key-file/kf-persona.vala"
	return result;
#line 2365 "kf-persona.c"
}


static void
folks_backends_kf_persona_real_set_alias (FolksAliasDetails* base,
                                          const gchar* value)
{
	FolksBackendsKfPersona* self;
#line 82 "/run/build/folks/backends/key-file/kf-persona.vala"
	self = (FolksBackendsKfPersona*) base;
#line 82 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_alias_details_change_alias ((FolksAliasDetails*) self, value, NULL, NULL);
#line 2378 "kf-persona.c"
}


static GeeMultiMap*
folks_backends_kf_persona_real_get_im_addresses (FolksImDetails* base)
{
	GeeMultiMap* result;
	FolksBackendsKfPersona* self;
	GeeHashMultiMap* _tmp0_;
#line 119 "/run/build/folks/backends/key-file/kf-persona.vala"
	self = (FolksBackendsKfPersona*) base;
#line 119 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp0_ = self->priv->_im_addresses;
#line 119 "/run/build/folks/backends/key-file/kf-persona.vala"
	result = (GeeMultiMap*) _tmp0_;
#line 119 "/run/build/folks/backends/key-file/kf-persona.vala"
	return result;
#line 2396 "kf-persona.c"
}


static void
folks_backends_kf_persona_real_set_im_addresses (FolksImDetails* base,
                                                 GeeMultiMap* value)
{
	FolksBackendsKfPersona* self;
#line 120 "/run/build/folks/backends/key-file/kf-persona.vala"
	self = (FolksBackendsKfPersona*) base;
#line 120 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_im_details_change_im_addresses ((FolksImDetails*) self, value, NULL, NULL);
#line 2409 "kf-persona.c"
}


static GeeMultiMap*
folks_backends_kf_persona_real_get_web_service_addresses (FolksWebServiceDetails* base)
{
	GeeMultiMap* result;
	FolksBackendsKfPersona* self;
	GeeHashMultiMap* _tmp0_;
#line 202 "/run/build/folks/backends/key-file/kf-persona.vala"
	self = (FolksBackendsKfPersona*) base;
#line 202 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp0_ = self->priv->_web_service_addresses;
#line 202 "/run/build/folks/backends/key-file/kf-persona.vala"
	result = (GeeMultiMap*) _tmp0_;
#line 202 "/run/build/folks/backends/key-file/kf-persona.vala"
	return result;
#line 2427 "kf-persona.c"
}


static void
folks_backends_kf_persona_real_set_web_service_addresses (FolksWebServiceDetails* base,
                                                          GeeMultiMap* value)
{
	FolksBackendsKfPersona* self;
#line 203 "/run/build/folks/backends/key-file/kf-persona.vala"
	self = (FolksBackendsKfPersona*) base;
#line 203 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_web_service_details_change_web_service_addresses ((FolksWebServiceDetails*) self, value, NULL, NULL);
#line 2440 "kf-persona.c"
}


static GeeSet*
folks_backends_kf_persona_real_get_anti_links (FolksAntiLinkable* base)
{
	GeeSet* result;
	FolksBackendsKfPersona* self;
	GeeSet* _tmp0_;
#line 272 "/run/build/folks/backends/key-file/kf-persona.vala"
	self = (FolksBackendsKfPersona*) base;
#line 272 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp0_ = self->priv->_anti_links_ro;
#line 272 "/run/build/folks/backends/key-file/kf-persona.vala"
	result = _tmp0_;
#line 272 "/run/build/folks/backends/key-file/kf-persona.vala"
	return result;
#line 2458 "kf-persona.c"
}


static void
folks_backends_kf_persona_real_set_anti_links (FolksAntiLinkable* base,
                                               GeeSet* value)
{
	FolksBackendsKfPersona* self;
#line 273 "/run/build/folks/backends/key-file/kf-persona.vala"
	self = (FolksBackendsKfPersona*) base;
#line 273 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_anti_linkable_change_anti_links ((FolksAntiLinkable*) self, value, NULL, NULL);
#line 2471 "kf-persona.c"
}


static GObject *
folks_backends_kf_persona_constructor (GType type,
                                       guint n_construct_properties,
                                       GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	FolksBackendsKfPersona * self;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
	const gchar* _tmp4_;
	const gchar* _tmp5_;
	GeeHashMultiMap* _tmp6_;
	GeeHashMultiMap* _tmp7_;
	FolksSmallSet* _tmp8_;
	FolksSmallSet* _tmp9_;
	GeeSet* _tmp10_;
	GeeSet* _tmp11_;
	GKeyFile* key_file = NULL;
	FolksPersonaStore* _tmp12_;
	FolksPersonaStore* _tmp13_;
	GKeyFile* _tmp14_;
	GError * _inner_error_ = NULL;
#line 324 "/run/build/folks/backends/key-file/kf-persona.vala"
	parent_class = G_OBJECT_CLASS (folks_backends_kf_persona_parent_class);
#line 324 "/run/build/folks/backends/key-file/kf-persona.vala"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 324 "/run/build/folks/backends/key-file/kf-persona.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, FOLKS_BACKENDS_KF_TYPE_PERSONA, FolksBackendsKfPersona);
#line 326 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp0_ = folks_persona_get_uid ((FolksPersona*) self);
#line 326 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp1_ = _tmp0_;
#line 326 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp2_ = folks_persona_get_iid ((FolksPersona*) self);
#line 326 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp3_ = _tmp2_;
#line 326 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp4_ = folks_persona_get_display_id ((FolksPersona*) self);
#line 326 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp5_ = _tmp4_;
#line 326 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_debug ("kf-persona.vala:326: Adding key-file Persona '%s' (IID '%s', group '%s" \
"')", _tmp1_, _tmp3_, _tmp5_);
#line 329 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp6_ = gee_hash_multi_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, FOLKS_TYPE_IM_FIELD_DETAILS, (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, NULL, NULL, NULL, NULL, NULL, NULL, _folks_abstract_field_details_hash_static_gee_hash_data_func, NULL, NULL, _folks_abstract_field_details_equal_static_gee_equal_data_func, NULL, NULL);
#line 329 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (self->priv->_im_addresses);
#line 329 "/run/build/folks/backends/key-file/kf-persona.vala"
	self->priv->_im_addresses = _tmp6_;
#line 332 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp7_ = gee_hash_multi_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, FOLKS_TYPE_WEB_SERVICE_FIELD_DETAILS, (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, NULL, NULL, NULL, NULL, NULL, NULL, _folks_abstract_field_details_hash_static_gee_hash_data_func, NULL, NULL, _folks_abstract_field_details_equal_static_gee_equal_data_func, NULL, NULL);
#line 332 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (self->priv->_web_service_addresses);
#line 332 "/run/build/folks/backends/key-file/kf-persona.vala"
	self->priv->_web_service_addresses = _tmp7_;
#line 336 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp8_ = folks_small_set_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, NULL, NULL, NULL, NULL, NULL, NULL);
#line 336 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (self->priv->_anti_links);
#line 336 "/run/build/folks/backends/key-file/kf-persona.vala"
	self->priv->_anti_links = _tmp8_;
#line 337 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp9_ = self->priv->_anti_links;
#line 337 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp10_ = gee_abstract_set_get_read_only_view ((GeeAbstractSet*) _tmp9_);
#line 337 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp11_ = _tmp10_;
#line 337 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (self->priv->_anti_links_ro);
#line 337 "/run/build/folks/backends/key-file/kf-persona.vala"
	self->priv->_anti_links_ro = _tmp11_;
#line 340 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp12_ = folks_persona_get_store ((FolksPersona*) self);
#line 340 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp13_ = _tmp12_;
#line 340 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp14_ = folks_backends_kf_persona_store_get_key_file (G_TYPE_CHECK_INSTANCE_CAST (_tmp13_, FOLKS_BACKENDS_KF_TYPE_PERSONA_STORE, FolksBackendsKfPersonaStore));
#line 340 "/run/build/folks/backends/key-file/kf-persona.vala"
	key_file = _tmp14_;
#line 2556 "kf-persona.c"
	{
		gchar** keys = NULL;
		GKeyFile* _tmp15_;
		const gchar* _tmp16_;
		const gchar* _tmp17_;
		gsize _tmp18_;
		gchar** _tmp19_;
		gint keys_length1;
		gint _keys_size_;
		gchar** _tmp20_;
		gint _tmp20__length1;
#line 344 "/run/build/folks/backends/key-file/kf-persona.vala"
		_tmp15_ = key_file;
#line 344 "/run/build/folks/backends/key-file/kf-persona.vala"
		_tmp16_ = folks_persona_get_display_id ((FolksPersona*) self);
#line 344 "/run/build/folks/backends/key-file/kf-persona.vala"
		_tmp17_ = _tmp16_;
#line 344 "/run/build/folks/backends/key-file/kf-persona.vala"
		_tmp19_ = g_key_file_get_keys (_tmp15_, _tmp17_, &_tmp18_, &_inner_error_);
#line 344 "/run/build/folks/backends/key-file/kf-persona.vala"
		keys = _tmp19_;
#line 344 "/run/build/folks/backends/key-file/kf-persona.vala"
		keys_length1 = _tmp18_;
#line 344 "/run/build/folks/backends/key-file/kf-persona.vala"
		_keys_size_ = keys_length1;
#line 344 "/run/build/folks/backends/key-file/kf-persona.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 344 "/run/build/folks/backends/key-file/kf-persona.vala"
			if (_inner_error_->domain == G_KEY_FILE_ERROR) {
#line 2586 "kf-persona.c"
				goto __catch5_g_key_file_error;
			}
#line 344 "/run/build/folks/backends/key-file/kf-persona.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 344 "/run/build/folks/backends/key-file/kf-persona.vala"
			g_clear_error (&_inner_error_);
#line 2593 "kf-persona.c"
		}
#line 345 "/run/build/folks/backends/key-file/kf-persona.vala"
		_tmp20_ = keys;
#line 345 "/run/build/folks/backends/key-file/kf-persona.vala"
		_tmp20__length1 = keys_length1;
#line 2599 "kf-persona.c"
		{
			gchar** key_collection = NULL;
			gint key_collection_length1 = 0;
			gint _key_collection_size_ = 0;
			gint key_it = 0;
#line 345 "/run/build/folks/backends/key-file/kf-persona.vala"
			key_collection = _tmp20_;
#line 345 "/run/build/folks/backends/key-file/kf-persona.vala"
			key_collection_length1 = _tmp20__length1;
#line 345 "/run/build/folks/backends/key-file/kf-persona.vala"
			for (key_it = 0; key_it < _tmp20__length1; key_it = key_it + 1) {
#line 2611 "kf-persona.c"
				const gchar* key = NULL;
#line 345 "/run/build/folks/backends/key-file/kf-persona.vala"
				key = key_collection[key_it];
#line 2615 "kf-persona.c"
				{
					const gchar* _tmp21_;
					const gchar* _tmp32_;
					gchar** decomposed_key = NULL;
					const gchar* _tmp45_;
					gchar** _tmp46_;
					gchar** _tmp47_;
					gint decomposed_key_length1;
					gint _decomposed_key_size_;
					gboolean _tmp48_ = FALSE;
					gchar** _tmp49_;
					gint _tmp49__length1;
					const gchar* protocol = NULL;
					const gchar* _tmp67_;
					gchar** im_addresses = NULL;
					GKeyFile* _tmp68_;
					const gchar* _tmp69_;
					const gchar* _tmp70_;
					const gchar* _tmp71_;
					gsize _tmp72_;
					gchar** _tmp73_;
					gint im_addresses_length1;
					gint _im_addresses_size_;
					gchar** _tmp74_;
					gint _tmp74__length1;
#line 348 "/run/build/folks/backends/key-file/kf-persona.vala"
					_tmp21_ = key;
#line 348 "/run/build/folks/backends/key-file/kf-persona.vala"
					if (g_strcmp0 (_tmp21_, "__alias") == 0) {
#line 2645 "kf-persona.c"
						gchar* _tmp22_ = NULL;
						GKeyFile* _tmp23_;
						const gchar* _tmp24_;
						const gchar* _tmp25_;
						const gchar* _tmp26_;
						gchar* _tmp27_;
						gchar* _tmp28_;
						const gchar* _tmp29_;
						const gchar* _tmp31_;
#line 350 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp23_ = key_file;
#line 350 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp24_ = folks_persona_get_display_id ((FolksPersona*) self);
#line 350 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp25_ = _tmp24_;
#line 350 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp26_ = key;
#line 350 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp27_ = g_key_file_get_string (_tmp23_, _tmp25_, _tmp26_, &_inner_error_);
#line 350 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp22_ = _tmp27_;
#line 350 "/run/build/folks/backends/key-file/kf-persona.vala"
						if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 350 "/run/build/folks/backends/key-file/kf-persona.vala"
							keys = (_vala_array_free (keys, keys_length1, (GDestroyNotify) g_free), NULL);
#line 350 "/run/build/folks/backends/key-file/kf-persona.vala"
							if (_inner_error_->domain == G_KEY_FILE_ERROR) {
#line 2673 "kf-persona.c"
								goto __catch5_g_key_file_error;
							}
#line 350 "/run/build/folks/backends/key-file/kf-persona.vala"
							keys = (_vala_array_free (keys, keys_length1, (GDestroyNotify) g_free), NULL);
#line 350 "/run/build/folks/backends/key-file/kf-persona.vala"
							g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 350 "/run/build/folks/backends/key-file/kf-persona.vala"
							g_clear_error (&_inner_error_);
#line 2682 "kf-persona.c"
						}
#line 350 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp28_ = _tmp22_;
#line 350 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp22_ = NULL;
#line 350 "/run/build/folks/backends/key-file/kf-persona.vala"
						_g_free0 (self->priv->_alias);
#line 350 "/run/build/folks/backends/key-file/kf-persona.vala"
						self->priv->_alias = _tmp28_;
#line 352 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp29_ = self->priv->_alias;
#line 352 "/run/build/folks/backends/key-file/kf-persona.vala"
						if (_tmp29_ == NULL) {
#line 2696 "kf-persona.c"
							gchar* _tmp30_;
#line 354 "/run/build/folks/backends/key-file/kf-persona.vala"
							_tmp30_ = g_strdup ("");
#line 354 "/run/build/folks/backends/key-file/kf-persona.vala"
							_g_free0 (self->priv->_alias);
#line 354 "/run/build/folks/backends/key-file/kf-persona.vala"
							self->priv->_alias = _tmp30_;
#line 2704 "kf-persona.c"
						}
#line 357 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp31_ = self->priv->_alias;
#line 357 "/run/build/folks/backends/key-file/kf-persona.vala"
						g_debug ("kf-persona.vala:357:     Loaded alias '%s'.", _tmp31_);
#line 358 "/run/build/folks/backends/key-file/kf-persona.vala"
						_g_free0 (_tmp22_);
#line 358 "/run/build/folks/backends/key-file/kf-persona.vala"
						continue;
#line 2714 "kf-persona.c"
					}
#line 362 "/run/build/folks/backends/key-file/kf-persona.vala"
					_tmp32_ = key;
#line 362 "/run/build/folks/backends/key-file/kf-persona.vala"
					if (g_strcmp0 (_tmp32_, FOLKS_BACKENDS_KF_PERSONA_STORE_anti_links_key_name) == 0) {
#line 2720 "kf-persona.c"
						gchar** anti_link_array = NULL;
						GKeyFile* _tmp33_;
						const gchar* _tmp34_;
						const gchar* _tmp35_;
						const gchar* _tmp36_;
						gsize _tmp37_;
						gchar** _tmp38_;
						gint anti_link_array_length1;
						gint _anti_link_array_size_;
						gchar** _tmp39_;
						gint _tmp39__length1;
#line 364 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp33_ = key_file;
#line 364 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp34_ = folks_persona_get_display_id ((FolksPersona*) self);
#line 364 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp35_ = _tmp34_;
#line 364 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp36_ = key;
#line 364 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp38_ = g_key_file_get_string_list (_tmp33_, _tmp35_, _tmp36_, &_tmp37_, &_inner_error_);
#line 364 "/run/build/folks/backends/key-file/kf-persona.vala"
						anti_link_array = _tmp38_;
#line 364 "/run/build/folks/backends/key-file/kf-persona.vala"
						anti_link_array_length1 = _tmp37_;
#line 364 "/run/build/folks/backends/key-file/kf-persona.vala"
						_anti_link_array_size_ = anti_link_array_length1;
#line 364 "/run/build/folks/backends/key-file/kf-persona.vala"
						if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 364 "/run/build/folks/backends/key-file/kf-persona.vala"
							keys = (_vala_array_free (keys, keys_length1, (GDestroyNotify) g_free), NULL);
#line 364 "/run/build/folks/backends/key-file/kf-persona.vala"
							if (_inner_error_->domain == G_KEY_FILE_ERROR) {
#line 2754 "kf-persona.c"
								goto __catch5_g_key_file_error;
							}
#line 364 "/run/build/folks/backends/key-file/kf-persona.vala"
							keys = (_vala_array_free (keys, keys_length1, (GDestroyNotify) g_free), NULL);
#line 364 "/run/build/folks/backends/key-file/kf-persona.vala"
							g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 364 "/run/build/folks/backends/key-file/kf-persona.vala"
							g_clear_error (&_inner_error_);
#line 2763 "kf-persona.c"
						}
#line 367 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp39_ = anti_link_array;
#line 367 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp39__length1 = anti_link_array_length1;
#line 367 "/run/build/folks/backends/key-file/kf-persona.vala"
						if (_tmp39_ != NULL) {
#line 2771 "kf-persona.c"
							gchar** _tmp40_;
							gint _tmp40__length1;
							gchar** _tmp44_;
							gint _tmp44__length1;
#line 369 "/run/build/folks/backends/key-file/kf-persona.vala"
							_tmp40_ = anti_link_array;
#line 369 "/run/build/folks/backends/key-file/kf-persona.vala"
							_tmp40__length1 = anti_link_array_length1;
#line 2780 "kf-persona.c"
							{
								gchar** anti_link_collection = NULL;
								gint anti_link_collection_length1 = 0;
								gint _anti_link_collection_size_ = 0;
								gint anti_link_it = 0;
#line 369 "/run/build/folks/backends/key-file/kf-persona.vala"
								anti_link_collection = _tmp40_;
#line 369 "/run/build/folks/backends/key-file/kf-persona.vala"
								anti_link_collection_length1 = _tmp40__length1;
#line 369 "/run/build/folks/backends/key-file/kf-persona.vala"
								for (anti_link_it = 0; anti_link_it < _tmp40__length1; anti_link_it = anti_link_it + 1) {
#line 2792 "kf-persona.c"
									gchar* _tmp41_;
									gchar* anti_link = NULL;
#line 369 "/run/build/folks/backends/key-file/kf-persona.vala"
									_tmp41_ = g_strdup (anti_link_collection[anti_link_it]);
#line 369 "/run/build/folks/backends/key-file/kf-persona.vala"
									anti_link = _tmp41_;
#line 2799 "kf-persona.c"
									{
										FolksSmallSet* _tmp42_;
										const gchar* _tmp43_;
#line 371 "/run/build/folks/backends/key-file/kf-persona.vala"
										_tmp42_ = self->priv->_anti_links;
#line 371 "/run/build/folks/backends/key-file/kf-persona.vala"
										_tmp43_ = anti_link;
#line 371 "/run/build/folks/backends/key-file/kf-persona.vala"
										gee_abstract_collection_add ((GeeAbstractCollection*) _tmp42_, _tmp43_);
#line 369 "/run/build/folks/backends/key-file/kf-persona.vala"
										_g_free0 (anti_link);
#line 2811 "kf-persona.c"
									}
								}
							}
#line 374 "/run/build/folks/backends/key-file/kf-persona.vala"
							_tmp44_ = anti_link_array;
#line 374 "/run/build/folks/backends/key-file/kf-persona.vala"
							_tmp44__length1 = anti_link_array_length1;
#line 374 "/run/build/folks/backends/key-file/kf-persona.vala"
							g_debug ("kf-persona.vala:374:     Loaded %u anti-links.", (guint) _tmp44__length1);
#line 376 "/run/build/folks/backends/key-file/kf-persona.vala"
							anti_link_array = (_vala_array_free (anti_link_array, anti_link_array_length1, (GDestroyNotify) g_free), NULL);
#line 376 "/run/build/folks/backends/key-file/kf-persona.vala"
							continue;
#line 2825 "kf-persona.c"
						}
#line 362 "/run/build/folks/backends/key-file/kf-persona.vala"
						anti_link_array = (_vala_array_free (anti_link_array, anti_link_array_length1, (GDestroyNotify) g_free), NULL);
#line 2829 "kf-persona.c"
					}
#line 381 "/run/build/folks/backends/key-file/kf-persona.vala"
					_tmp45_ = key;
#line 381 "/run/build/folks/backends/key-file/kf-persona.vala"
					_tmp47_ = _tmp46_ = g_strsplit (_tmp45_, ".", 2);
#line 381 "/run/build/folks/backends/key-file/kf-persona.vala"
					decomposed_key = _tmp47_;
#line 381 "/run/build/folks/backends/key-file/kf-persona.vala"
					decomposed_key_length1 = _vala_array_length (_tmp46_);
#line 381 "/run/build/folks/backends/key-file/kf-persona.vala"
					_decomposed_key_size_ = decomposed_key_length1;
#line 382 "/run/build/folks/backends/key-file/kf-persona.vala"
					_tmp49_ = decomposed_key;
#line 382 "/run/build/folks/backends/key-file/kf-persona.vala"
					_tmp49__length1 = decomposed_key_length1;
#line 382 "/run/build/folks/backends/key-file/kf-persona.vala"
					if (_tmp49__length1 == 2) {
#line 2847 "kf-persona.c"
						gchar** _tmp50_;
						gint _tmp50__length1;
						const gchar* _tmp51_;
#line 383 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp50_ = decomposed_key;
#line 383 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp50__length1 = decomposed_key_length1;
#line 383 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp51_ = _tmp50_[0];
#line 383 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp48_ = g_strcmp0 (_tmp51_, "web-service") == 0;
#line 2859 "kf-persona.c"
					} else {
#line 382 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp48_ = FALSE;
#line 2863 "kf-persona.c"
					}
#line 382 "/run/build/folks/backends/key-file/kf-persona.vala"
					if (_tmp48_) {
#line 2867 "kf-persona.c"
						const gchar* web_service = NULL;
						gchar** _tmp52_;
						gint _tmp52__length1;
						const gchar* _tmp53_;
						gchar** web_service_addresses = NULL;
						GKeyFile* _tmp54_;
						const gchar* _tmp55_;
						const gchar* _tmp56_;
						const gchar* _tmp57_;
						gsize _tmp58_;
						gchar** _tmp59_;
						gint web_service_addresses_length1;
						gint _web_service_addresses_size_;
						gchar** _tmp60_;
						gint _tmp60__length1;
#line 385 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp52_ = decomposed_key;
#line 385 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp52__length1 = decomposed_key_length1;
#line 385 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp53_ = _tmp52_[1];
#line 385 "/run/build/folks/backends/key-file/kf-persona.vala"
						web_service = _tmp53_;
#line 386 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp54_ = key_file;
#line 386 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp55_ = folks_persona_get_display_id ((FolksPersona*) self);
#line 386 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp56_ = _tmp55_;
#line 386 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp57_ = web_service;
#line 386 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp59_ = g_key_file_get_string_list (_tmp54_, _tmp56_, _tmp57_, &_tmp58_, &_inner_error_);
#line 386 "/run/build/folks/backends/key-file/kf-persona.vala"
						web_service_addresses = _tmp59_;
#line 386 "/run/build/folks/backends/key-file/kf-persona.vala"
						web_service_addresses_length1 = _tmp58_;
#line 386 "/run/build/folks/backends/key-file/kf-persona.vala"
						_web_service_addresses_size_ = web_service_addresses_length1;
#line 386 "/run/build/folks/backends/key-file/kf-persona.vala"
						if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 386 "/run/build/folks/backends/key-file/kf-persona.vala"
							decomposed_key = (_vala_array_free (decomposed_key, decomposed_key_length1, (GDestroyNotify) g_free), NULL);
#line 386 "/run/build/folks/backends/key-file/kf-persona.vala"
							keys = (_vala_array_free (keys, keys_length1, (GDestroyNotify) g_free), NULL);
#line 386 "/run/build/folks/backends/key-file/kf-persona.vala"
							if (_inner_error_->domain == G_KEY_FILE_ERROR) {
#line 2915 "kf-persona.c"
								goto __catch5_g_key_file_error;
							}
#line 386 "/run/build/folks/backends/key-file/kf-persona.vala"
							decomposed_key = (_vala_array_free (decomposed_key, decomposed_key_length1, (GDestroyNotify) g_free), NULL);
#line 386 "/run/build/folks/backends/key-file/kf-persona.vala"
							keys = (_vala_array_free (keys, keys_length1, (GDestroyNotify) g_free), NULL);
#line 386 "/run/build/folks/backends/key-file/kf-persona.vala"
							g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 386 "/run/build/folks/backends/key-file/kf-persona.vala"
							g_clear_error (&_inner_error_);
#line 2926 "kf-persona.c"
						}
#line 389 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp60_ = web_service_addresses;
#line 389 "/run/build/folks/backends/key-file/kf-persona.vala"
						_tmp60__length1 = web_service_addresses_length1;
#line 2932 "kf-persona.c"
						{
							gchar** web_service_address_collection = NULL;
							gint web_service_address_collection_length1 = 0;
							gint _web_service_address_collection_size_ = 0;
							gint web_service_address_it = 0;
#line 389 "/run/build/folks/backends/key-file/kf-persona.vala"
							web_service_address_collection = _tmp60_;
#line 389 "/run/build/folks/backends/key-file/kf-persona.vala"
							web_service_address_collection_length1 = _tmp60__length1;
#line 389 "/run/build/folks/backends/key-file/kf-persona.vala"
							for (web_service_address_it = 0; web_service_address_it < _tmp60__length1; web_service_address_it = web_service_address_it + 1) {
#line 2944 "kf-persona.c"
								gchar* _tmp61_;
								gchar* web_service_address = NULL;
#line 389 "/run/build/folks/backends/key-file/kf-persona.vala"
								_tmp61_ = g_strdup (web_service_address_collection[web_service_address_it]);
#line 389 "/run/build/folks/backends/key-file/kf-persona.vala"
								web_service_address = _tmp61_;
#line 2951 "kf-persona.c"
								{
									GeeHashMultiMap* _tmp62_;
									const gchar* _tmp63_;
									const gchar* _tmp64_;
									FolksWebServiceFieldDetails* _tmp65_;
									FolksWebServiceFieldDetails* _tmp66_;
#line 391 "/run/build/folks/backends/key-file/kf-persona.vala"
									_tmp62_ = self->priv->_web_service_addresses;
#line 391 "/run/build/folks/backends/key-file/kf-persona.vala"
									_tmp63_ = web_service;
#line 391 "/run/build/folks/backends/key-file/kf-persona.vala"
									_tmp64_ = web_service_address;
#line 391 "/run/build/folks/backends/key-file/kf-persona.vala"
									_tmp65_ = folks_web_service_field_details_new (_tmp64_, NULL);
#line 391 "/run/build/folks/backends/key-file/kf-persona.vala"
									_tmp66_ = _tmp65_;
#line 391 "/run/build/folks/backends/key-file/kf-persona.vala"
									gee_multi_map_set ((GeeMultiMap*) _tmp62_, _tmp63_, _tmp66_);
#line 391 "/run/build/folks/backends/key-file/kf-persona.vala"
									_g_object_unref0 (_tmp66_);
#line 389 "/run/build/folks/backends/key-file/kf-persona.vala"
									_g_free0 (web_service_address);
#line 2974 "kf-persona.c"
								}
							}
						}
#line 395 "/run/build/folks/backends/key-file/kf-persona.vala"
						web_service_addresses = (_vala_array_free (web_service_addresses, web_service_addresses_length1, (GDestroyNotify) g_free), NULL);
#line 395 "/run/build/folks/backends/key-file/kf-persona.vala"
						decomposed_key = (_vala_array_free (decomposed_key, decomposed_key_length1, (GDestroyNotify) g_free), NULL);
#line 395 "/run/build/folks/backends/key-file/kf-persona.vala"
						continue;
#line 2984 "kf-persona.c"
					}
#line 399 "/run/build/folks/backends/key-file/kf-persona.vala"
					_tmp67_ = key;
#line 399 "/run/build/folks/backends/key-file/kf-persona.vala"
					protocol = _tmp67_;
#line 400 "/run/build/folks/backends/key-file/kf-persona.vala"
					_tmp68_ = key_file;
#line 400 "/run/build/folks/backends/key-file/kf-persona.vala"
					_tmp69_ = folks_persona_get_display_id ((FolksPersona*) self);
#line 400 "/run/build/folks/backends/key-file/kf-persona.vala"
					_tmp70_ = _tmp69_;
#line 400 "/run/build/folks/backends/key-file/kf-persona.vala"
					_tmp71_ = protocol;
#line 400 "/run/build/folks/backends/key-file/kf-persona.vala"
					_tmp73_ = g_key_file_get_string_list (_tmp68_, _tmp70_, _tmp71_, &_tmp72_, &_inner_error_);
#line 400 "/run/build/folks/backends/key-file/kf-persona.vala"
					im_addresses = _tmp73_;
#line 400 "/run/build/folks/backends/key-file/kf-persona.vala"
					im_addresses_length1 = _tmp72_;
#line 400 "/run/build/folks/backends/key-file/kf-persona.vala"
					_im_addresses_size_ = im_addresses_length1;
#line 400 "/run/build/folks/backends/key-file/kf-persona.vala"
					if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 400 "/run/build/folks/backends/key-file/kf-persona.vala"
						decomposed_key = (_vala_array_free (decomposed_key, decomposed_key_length1, (GDestroyNotify) g_free), NULL);
#line 400 "/run/build/folks/backends/key-file/kf-persona.vala"
						keys = (_vala_array_free (keys, keys_length1, (GDestroyNotify) g_free), NULL);
#line 400 "/run/build/folks/backends/key-file/kf-persona.vala"
						if (_inner_error_->domain == G_KEY_FILE_ERROR) {
#line 3014 "kf-persona.c"
							goto __catch5_g_key_file_error;
						}
#line 400 "/run/build/folks/backends/key-file/kf-persona.vala"
						decomposed_key = (_vala_array_free (decomposed_key, decomposed_key_length1, (GDestroyNotify) g_free), NULL);
#line 400 "/run/build/folks/backends/key-file/kf-persona.vala"
						keys = (_vala_array_free (keys, keys_length1, (GDestroyNotify) g_free), NULL);
#line 400 "/run/build/folks/backends/key-file/kf-persona.vala"
						g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 400 "/run/build/folks/backends/key-file/kf-persona.vala"
						g_clear_error (&_inner_error_);
#line 3025 "kf-persona.c"
					}
#line 403 "/run/build/folks/backends/key-file/kf-persona.vala"
					_tmp74_ = im_addresses;
#line 403 "/run/build/folks/backends/key-file/kf-persona.vala"
					_tmp74__length1 = im_addresses_length1;
#line 3031 "kf-persona.c"
					{
						gchar** im_address_collection = NULL;
						gint im_address_collection_length1 = 0;
						gint _im_address_collection_size_ = 0;
						gint im_address_it = 0;
#line 403 "/run/build/folks/backends/key-file/kf-persona.vala"
						im_address_collection = _tmp74_;
#line 403 "/run/build/folks/backends/key-file/kf-persona.vala"
						im_address_collection_length1 = _tmp74__length1;
#line 403 "/run/build/folks/backends/key-file/kf-persona.vala"
						for (im_address_it = 0; im_address_it < _tmp74__length1; im_address_it = im_address_it + 1) {
#line 3043 "kf-persona.c"
							gchar* _tmp75_;
							gchar* im_address = NULL;
#line 403 "/run/build/folks/backends/key-file/kf-persona.vala"
							_tmp75_ = g_strdup (im_address_collection[im_address_it]);
#line 403 "/run/build/folks/backends/key-file/kf-persona.vala"
							im_address = _tmp75_;
#line 3050 "kf-persona.c"
							{
								gchar* address = NULL;
								FolksImFieldDetails* im_fd = NULL;
								const gchar* _tmp83_;
								FolksImFieldDetails* _tmp84_;
								GeeHashMultiMap* _tmp85_;
								const gchar* _tmp86_;
								FolksImFieldDetails* _tmp87_;
								{
									gchar* _tmp76_ = NULL;
									const gchar* _tmp77_;
									const gchar* _tmp78_;
									gchar* _tmp79_;
									gchar* _tmp80_;
#line 408 "/run/build/folks/backends/key-file/kf-persona.vala"
									_tmp77_ = im_address;
#line 408 "/run/build/folks/backends/key-file/kf-persona.vala"
									_tmp78_ = protocol;
#line 408 "/run/build/folks/backends/key-file/kf-persona.vala"
									_tmp79_ = folks_im_details_normalise_im_address (_tmp77_, _tmp78_, &_inner_error_);
#line 408 "/run/build/folks/backends/key-file/kf-persona.vala"
									_tmp76_ = _tmp79_;
#line 408 "/run/build/folks/backends/key-file/kf-persona.vala"
									if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 408 "/run/build/folks/backends/key-file/kf-persona.vala"
										if (_inner_error_->domain == FOLKS_IM_DETAILS_ERROR) {
#line 3077 "kf-persona.c"
											goto __catch6_folks_im_details_error;
										}
#line 408 "/run/build/folks/backends/key-file/kf-persona.vala"
										_g_free0 (address);
#line 408 "/run/build/folks/backends/key-file/kf-persona.vala"
										_g_free0 (im_address);
#line 408 "/run/build/folks/backends/key-file/kf-persona.vala"
										im_addresses = (_vala_array_free (im_addresses, im_addresses_length1, (GDestroyNotify) g_free), NULL);
#line 408 "/run/build/folks/backends/key-file/kf-persona.vala"
										decomposed_key = (_vala_array_free (decomposed_key, decomposed_key_length1, (GDestroyNotify) g_free), NULL);
#line 408 "/run/build/folks/backends/key-file/kf-persona.vala"
										keys = (_vala_array_free (keys, keys_length1, (GDestroyNotify) g_free), NULL);
#line 408 "/run/build/folks/backends/key-file/kf-persona.vala"
										g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 408 "/run/build/folks/backends/key-file/kf-persona.vala"
										g_clear_error (&_inner_error_);
#line 3094 "kf-persona.c"
									}
#line 408 "/run/build/folks/backends/key-file/kf-persona.vala"
									_tmp80_ = _tmp76_;
#line 408 "/run/build/folks/backends/key-file/kf-persona.vala"
									_tmp76_ = NULL;
#line 408 "/run/build/folks/backends/key-file/kf-persona.vala"
									_g_free0 (address);
#line 408 "/run/build/folks/backends/key-file/kf-persona.vala"
									address = _tmp80_;
#line 406 "/run/build/folks/backends/key-file/kf-persona.vala"
									_g_free0 (_tmp76_);
#line 3106 "kf-persona.c"
								}
								goto __finally6;
								__catch6_folks_im_details_error:
								{
									GError* e = NULL;
									GError* _tmp81_;
									const gchar* _tmp82_;
#line 406 "/run/build/folks/backends/key-file/kf-persona.vala"
									e = _inner_error_;
#line 406 "/run/build/folks/backends/key-file/kf-persona.vala"
									_inner_error_ = NULL;
#line 414 "/run/build/folks/backends/key-file/kf-persona.vala"
									_tmp81_ = e;
#line 414 "/run/build/folks/backends/key-file/kf-persona.vala"
									_tmp82_ = _tmp81_->message;
#line 414 "/run/build/folks/backends/key-file/kf-persona.vala"
									g_warning ("kf-persona.vala:414: %s", _tmp82_);
#line 415 "/run/build/folks/backends/key-file/kf-persona.vala"
									_g_error_free0 (e);
#line 415 "/run/build/folks/backends/key-file/kf-persona.vala"
									_g_free0 (address);
#line 415 "/run/build/folks/backends/key-file/kf-persona.vala"
									_g_free0 (im_address);
#line 415 "/run/build/folks/backends/key-file/kf-persona.vala"
									continue;
#line 3132 "kf-persona.c"
								}
								__finally6:
#line 406 "/run/build/folks/backends/key-file/kf-persona.vala"
								if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 406 "/run/build/folks/backends/key-file/kf-persona.vala"
									_g_free0 (address);
#line 406 "/run/build/folks/backends/key-file/kf-persona.vala"
									_g_free0 (im_address);
#line 406 "/run/build/folks/backends/key-file/kf-persona.vala"
									im_addresses = (_vala_array_free (im_addresses, im_addresses_length1, (GDestroyNotify) g_free), NULL);
#line 406 "/run/build/folks/backends/key-file/kf-persona.vala"
									decomposed_key = (_vala_array_free (decomposed_key, decomposed_key_length1, (GDestroyNotify) g_free), NULL);
#line 406 "/run/build/folks/backends/key-file/kf-persona.vala"
									keys = (_vala_array_free (keys, keys_length1, (GDestroyNotify) g_free), NULL);
#line 406 "/run/build/folks/backends/key-file/kf-persona.vala"
									if (_inner_error_->domain == G_KEY_FILE_ERROR) {
#line 3149 "kf-persona.c"
										goto __catch5_g_key_file_error;
									}
#line 406 "/run/build/folks/backends/key-file/kf-persona.vala"
									_g_free0 (address);
#line 406 "/run/build/folks/backends/key-file/kf-persona.vala"
									_g_free0 (im_address);
#line 406 "/run/build/folks/backends/key-file/kf-persona.vala"
									im_addresses = (_vala_array_free (im_addresses, im_addresses_length1, (GDestroyNotify) g_free), NULL);
#line 406 "/run/build/folks/backends/key-file/kf-persona.vala"
									decomposed_key = (_vala_array_free (decomposed_key, decomposed_key_length1, (GDestroyNotify) g_free), NULL);
#line 406 "/run/build/folks/backends/key-file/kf-persona.vala"
									keys = (_vala_array_free (keys, keys_length1, (GDestroyNotify) g_free), NULL);
#line 406 "/run/build/folks/backends/key-file/kf-persona.vala"
									g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 406 "/run/build/folks/backends/key-file/kf-persona.vala"
									g_clear_error (&_inner_error_);
#line 3166 "kf-persona.c"
								}
#line 418 "/run/build/folks/backends/key-file/kf-persona.vala"
								_tmp83_ = address;
#line 418 "/run/build/folks/backends/key-file/kf-persona.vala"
								_tmp84_ = folks_im_field_details_new (_tmp83_, NULL);
#line 418 "/run/build/folks/backends/key-file/kf-persona.vala"
								im_fd = _tmp84_;
#line 419 "/run/build/folks/backends/key-file/kf-persona.vala"
								_tmp85_ = self->priv->_im_addresses;
#line 419 "/run/build/folks/backends/key-file/kf-persona.vala"
								_tmp86_ = protocol;
#line 419 "/run/build/folks/backends/key-file/kf-persona.vala"
								_tmp87_ = im_fd;
#line 419 "/run/build/folks/backends/key-file/kf-persona.vala"
								gee_multi_map_set ((GeeMultiMap*) _tmp85_, _tmp86_, _tmp87_);
#line 403 "/run/build/folks/backends/key-file/kf-persona.vala"
								_g_object_unref0 (im_fd);
#line 403 "/run/build/folks/backends/key-file/kf-persona.vala"
								_g_free0 (address);
#line 403 "/run/build/folks/backends/key-file/kf-persona.vala"
								_g_free0 (im_address);
#line 3188 "kf-persona.c"
							}
						}
					}
#line 345 "/run/build/folks/backends/key-file/kf-persona.vala"
					im_addresses = (_vala_array_free (im_addresses, im_addresses_length1, (GDestroyNotify) g_free), NULL);
#line 345 "/run/build/folks/backends/key-file/kf-persona.vala"
					decomposed_key = (_vala_array_free (decomposed_key, decomposed_key_length1, (GDestroyNotify) g_free), NULL);
#line 3196 "kf-persona.c"
				}
			}
		}
#line 342 "/run/build/folks/backends/key-file/kf-persona.vala"
		keys = (_vala_array_free (keys, keys_length1, (GDestroyNotify) g_free), NULL);
#line 3202 "kf-persona.c"
	}
	goto __finally5;
	__catch5_g_key_file_error:
	{
		GError* e = NULL;
		GError* _tmp88_;
#line 342 "/run/build/folks/backends/key-file/kf-persona.vala"
		e = _inner_error_;
#line 342 "/run/build/folks/backends/key-file/kf-persona.vala"
		_inner_error_ = NULL;
#line 429 "/run/build/folks/backends/key-file/kf-persona.vala"
		_tmp88_ = e;
#line 429 "/run/build/folks/backends/key-file/kf-persona.vala"
		if (!g_error_matches (_tmp88_, G_KEY_FILE_ERROR, G_KEY_FILE_ERROR_GROUP_NOT_FOUND)) {
#line 3217 "kf-persona.c"
			GError* _tmp89_;
			const gchar* _tmp90_;
#line 432 "/run/build/folks/backends/key-file/kf-persona.vala"
			_tmp89_ = e;
#line 432 "/run/build/folks/backends/key-file/kf-persona.vala"
			_tmp90_ = _tmp89_->message;
#line 432 "/run/build/folks/backends/key-file/kf-persona.vala"
			g_warning (_ ("Couldn’t load data from key file: %s"), _tmp90_);
#line 3226 "kf-persona.c"
		}
#line 342 "/run/build/folks/backends/key-file/kf-persona.vala"
		_g_error_free0 (e);
#line 3230 "kf-persona.c"
	}
	__finally5:
#line 342 "/run/build/folks/backends/key-file/kf-persona.vala"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 342 "/run/build/folks/backends/key-file/kf-persona.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 342 "/run/build/folks/backends/key-file/kf-persona.vala"
		g_clear_error (&_inner_error_);
#line 3239 "kf-persona.c"
	}
#line 324 "/run/build/folks/backends/key-file/kf-persona.vala"
	return obj;
#line 3243 "kf-persona.c"
}


static void
folks_backends_kf_persona_class_init (FolksBackendsKfPersonaClass * klass)
{
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_parent_class = g_type_class_peek_parent (klass);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_type_class_add_private (klass, sizeof (FolksBackendsKfPersonaPrivate));
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	((FolksPersonaClass *) klass)->linkable_property_to_links = (void (*) (FolksPersona *, const gchar*, FolksPersonaLinkablePropertyCallback, gpointer)) folks_backends_kf_persona_real_linkable_property_to_links;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	FOLKS_PERSONA_CLASS (klass)->get_linkable_properties = folks_backends_kf_persona_real_get_linkable_properties;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	FOLKS_PERSONA_CLASS (klass)->get_writeable_properties = folks_backends_kf_persona_real_get_writeable_properties;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_folks_backends_kf_persona_get_property;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_folks_backends_kf_persona_set_property;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	G_OBJECT_CLASS (klass)->constructor = folks_backends_kf_persona_constructor;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	G_OBJECT_CLASS (klass)->finalize = folks_backends_kf_persona_finalize;
#line 3268 "kf-persona.c"
	/**
	   * {@inheritDoc}
	   */
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), FOLKS_BACKENDS_KF_PERSONA_LINKABLE_PROPERTIES_PROPERTY, folks_backends_kf_persona_properties[FOLKS_BACKENDS_KF_PERSONA_LINKABLE_PROPERTIES_PROPERTY] = g_param_spec_boxed ("linkable-properties", "linkable-properties", "linkable-properties", G_TYPE_STRV, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE));
#line 3274 "kf-persona.c"
	/**
	   * {@inheritDoc}
	   *
	   * @since 0.6.0
	   */
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), FOLKS_BACKENDS_KF_PERSONA_WRITEABLE_PROPERTIES_PROPERTY, folks_backends_kf_persona_properties[FOLKS_BACKENDS_KF_PERSONA_WRITEABLE_PROPERTIES_PROPERTY] = g_param_spec_boxed ("writeable-properties", "writeable-properties", "writeable-properties", G_TYPE_STRV, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE));
#line 3282 "kf-persona.c"
	/**
	   * {@inheritDoc}
	   *
	   * @since 0.1.15
	   */
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), FOLKS_BACKENDS_KF_PERSONA_ALIAS_PROPERTY, folks_backends_kf_persona_properties[FOLKS_BACKENDS_KF_PERSONA_ALIAS_PROPERTY] = g_param_spec_string ("alias", "alias", "alias", NULL, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 3290 "kf-persona.c"
	/**
	   * {@inheritDoc}
	   */
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), FOLKS_BACKENDS_KF_PERSONA_IM_ADDRESSES_PROPERTY, folks_backends_kf_persona_properties[FOLKS_BACKENDS_KF_PERSONA_IM_ADDRESSES_PROPERTY] = g_param_spec_object ("im-addresses", "im-addresses", "im-addresses", GEE_TYPE_MULTI_MAP, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 3296 "kf-persona.c"
	/**
	   * {@inheritDoc}
	   */
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), FOLKS_BACKENDS_KF_PERSONA_WEB_SERVICE_ADDRESSES_PROPERTY, folks_backends_kf_persona_properties[FOLKS_BACKENDS_KF_PERSONA_WEB_SERVICE_ADDRESSES_PROPERTY] = g_param_spec_object ("web-service-addresses", "web-service-addresses", "web-service-addresses", GEE_TYPE_MULTI_MAP, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 3302 "kf-persona.c"
	/**
	   * {@inheritDoc}
	   *
	   * @since 0.7.3
	   */
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), FOLKS_BACKENDS_KF_PERSONA_ANTI_LINKS_PROPERTY, folks_backends_kf_persona_properties[FOLKS_BACKENDS_KF_PERSONA_ANTI_LINKS_PROPERTY] = g_param_spec_object ("anti-links", "anti-links", "anti-links", GEE_TYPE_SET, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 3310 "kf-persona.c"
}


static void
folks_backends_kf_persona_folks_alias_details_interface_init (FolksAliasDetailsIface * iface)
{
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_folks_alias_details_parent_iface = g_type_interface_peek_parent (iface);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	iface->change_alias = (void (*) (FolksAliasDetails *, const gchar*, GAsyncReadyCallback, gpointer)) folks_backends_kf_persona_real_change_alias;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	iface->change_alias_finish = (void (*) (FolksAliasDetails *, GAsyncResult*, GError**)) folks_backends_kf_persona_real_change_alias_finish;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	iface->get_alias = folks_backends_kf_persona_real_get_alias;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	iface->set_alias = folks_backends_kf_persona_real_set_alias;
#line 3327 "kf-persona.c"
}


static void
folks_backends_kf_persona_folks_anti_linkable_interface_init (FolksAntiLinkableIface * iface)
{
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_folks_anti_linkable_parent_iface = g_type_interface_peek_parent (iface);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	iface->change_anti_links = (void (*) (FolksAntiLinkable *, GeeSet*, GAsyncReadyCallback, gpointer)) folks_backends_kf_persona_real_change_anti_links;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	iface->change_anti_links_finish = (void (*) (FolksAntiLinkable *, GAsyncResult*, GError**)) folks_backends_kf_persona_real_change_anti_links_finish;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	iface->get_anti_links = folks_backends_kf_persona_real_get_anti_links;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	iface->set_anti_links = folks_backends_kf_persona_real_set_anti_links;
#line 3344 "kf-persona.c"
}


static void
folks_backends_kf_persona_folks_im_details_interface_init (FolksImDetailsIface * iface)
{
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_folks_im_details_parent_iface = g_type_interface_peek_parent (iface);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	iface->change_im_addresses = (void (*) (FolksImDetails *, GeeMultiMap*, GAsyncReadyCallback, gpointer)) folks_backends_kf_persona_real_change_im_addresses;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	iface->change_im_addresses_finish = (void (*) (FolksImDetails *, GAsyncResult*, GError**)) folks_backends_kf_persona_real_change_im_addresses_finish;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	iface->get_im_addresses = folks_backends_kf_persona_real_get_im_addresses;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	iface->set_im_addresses = folks_backends_kf_persona_real_set_im_addresses;
#line 3361 "kf-persona.c"
}


static void
folks_backends_kf_persona_folks_web_service_details_interface_init (FolksWebServiceDetailsIface * iface)
{
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	folks_backends_kf_persona_folks_web_service_details_parent_iface = g_type_interface_peek_parent (iface);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	iface->change_web_service_addresses = (void (*) (FolksWebServiceDetails *, GeeMultiMap*, GAsyncReadyCallback, gpointer)) folks_backends_kf_persona_real_change_web_service_addresses;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	iface->change_web_service_addresses_finish = (void (*) (FolksWebServiceDetails *, GAsyncResult*, GError**)) folks_backends_kf_persona_real_change_web_service_addresses_finish;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	iface->get_web_service_addresses = folks_backends_kf_persona_real_get_web_service_addresses;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	iface->set_web_service_addresses = folks_backends_kf_persona_real_set_web_service_addresses;
#line 3378 "kf-persona.c"
}


static void
folks_backends_kf_persona_instance_init (FolksBackendsKfPersona * self)
{
	gchar* _tmp0_;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	self->priv = FOLKS_BACKENDS_KF_PERSONA_GET_PRIVATE (self);
#line 39 "/run/build/folks/backends/key-file/kf-persona.vala"
	_tmp0_ = g_strdup ("");
#line 39 "/run/build/folks/backends/key-file/kf-persona.vala"
	self->priv->_alias = _tmp0_;
#line 3392 "kf-persona.c"
}


static void
folks_backends_kf_persona_finalize (GObject * obj)
{
	FolksBackendsKfPersona * self;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, FOLKS_BACKENDS_KF_TYPE_PERSONA, FolksBackendsKfPersona);
#line 37 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (self->priv->_im_addresses);
#line 38 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (self->priv->_web_service_addresses);
#line 39 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_free0 (self->priv->_alias);
#line 261 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (self->priv->_anti_links);
#line 262 "/run/build/folks/backends/key-file/kf-persona.vala"
	_g_object_unref0 (self->priv->_anti_links_ro);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	G_OBJECT_CLASS (folks_backends_kf_persona_parent_class)->finalize (obj);
#line 3414 "kf-persona.c"
}


/**
 * A persona subclass which represents a single persona from a simple key file.
 *
 * @since 0.1.13
 */
GType
folks_backends_kf_persona_get_type (void)
{
	static volatile gsize folks_backends_kf_persona_type_id__volatile = 0;
	if (g_once_init_enter (&folks_backends_kf_persona_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (FolksBackendsKfPersonaClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) folks_backends_kf_persona_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (FolksBackendsKfPersona), 0, (GInstanceInitFunc) folks_backends_kf_persona_instance_init, NULL };
		static const GInterfaceInfo folks_alias_details_info = { (GInterfaceInitFunc) folks_backends_kf_persona_folks_alias_details_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		static const GInterfaceInfo folks_anti_linkable_info = { (GInterfaceInitFunc) folks_backends_kf_persona_folks_anti_linkable_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		static const GInterfaceInfo folks_im_details_info = { (GInterfaceInitFunc) folks_backends_kf_persona_folks_im_details_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		static const GInterfaceInfo folks_web_service_details_info = { (GInterfaceInitFunc) folks_backends_kf_persona_folks_web_service_details_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		GType folks_backends_kf_persona_type_id;
		folks_backends_kf_persona_type_id = g_type_register_static (FOLKS_TYPE_PERSONA, "FolksBackendsKfPersona", &g_define_type_info, 0);
		g_type_add_interface_static (folks_backends_kf_persona_type_id, FOLKS_TYPE_ALIAS_DETAILS, &folks_alias_details_info);
		g_type_add_interface_static (folks_backends_kf_persona_type_id, FOLKS_TYPE_ANTI_LINKABLE, &folks_anti_linkable_info);
		g_type_add_interface_static (folks_backends_kf_persona_type_id, FOLKS_TYPE_IM_DETAILS, &folks_im_details_info);
		g_type_add_interface_static (folks_backends_kf_persona_type_id, FOLKS_TYPE_WEB_SERVICE_DETAILS, &folks_web_service_details_info);
		g_once_init_leave (&folks_backends_kf_persona_type_id__volatile, folks_backends_kf_persona_type_id);
	}
	return folks_backends_kf_persona_type_id__volatile;
}


static void
_vala_folks_backends_kf_persona_get_property (GObject * object,
                                              guint property_id,
                                              GValue * value,
                                              GParamSpec * pspec)
{
	FolksBackendsKfPersona * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, FOLKS_BACKENDS_KF_TYPE_PERSONA, FolksBackendsKfPersona);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	switch (property_id) {
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		case FOLKS_BACKENDS_KF_PERSONA_LINKABLE_PROPERTIES_PROPERTY:
#line 3457 "kf-persona.c"
		{
			int length;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
			g_value_set_boxed (value, folks_persona_get_linkable_properties ((FolksPersona*) self, &length));
#line 3462 "kf-persona.c"
		}
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		break;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		case FOLKS_BACKENDS_KF_PERSONA_WRITEABLE_PROPERTIES_PROPERTY:
#line 3468 "kf-persona.c"
		{
			int length;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
			g_value_set_boxed (value, folks_persona_get_writeable_properties ((FolksPersona*) self, &length));
#line 3473 "kf-persona.c"
		}
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		break;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		case FOLKS_BACKENDS_KF_PERSONA_ALIAS_PROPERTY:
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		g_value_set_string (value, folks_alias_details_get_alias ((FolksAliasDetails*) self));
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		break;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		case FOLKS_BACKENDS_KF_PERSONA_IM_ADDRESSES_PROPERTY:
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		g_value_set_object (value, folks_im_details_get_im_addresses ((FolksImDetails*) self));
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		break;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		case FOLKS_BACKENDS_KF_PERSONA_WEB_SERVICE_ADDRESSES_PROPERTY:
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		g_value_set_object (value, folks_web_service_details_get_web_service_addresses ((FolksWebServiceDetails*) self));
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		break;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		case FOLKS_BACKENDS_KF_PERSONA_ANTI_LINKS_PROPERTY:
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		g_value_set_object (value, folks_anti_linkable_get_anti_links ((FolksAntiLinkable*) self));
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		break;
#line 3501 "kf-persona.c"
		default:
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		break;
#line 3507 "kf-persona.c"
	}
}


static void
_vala_folks_backends_kf_persona_set_property (GObject * object,
                                              guint property_id,
                                              const GValue * value,
                                              GParamSpec * pspec)
{
	FolksBackendsKfPersona * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, FOLKS_BACKENDS_KF_TYPE_PERSONA, FolksBackendsKfPersona);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
	switch (property_id) {
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		case FOLKS_BACKENDS_KF_PERSONA_ALIAS_PROPERTY:
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		folks_alias_details_set_alias ((FolksAliasDetails*) self, g_value_get_string (value));
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		break;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		case FOLKS_BACKENDS_KF_PERSONA_IM_ADDRESSES_PROPERTY:
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		folks_im_details_set_im_addresses ((FolksImDetails*) self, g_value_get_object (value));
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		break;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		case FOLKS_BACKENDS_KF_PERSONA_WEB_SERVICE_ADDRESSES_PROPERTY:
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		folks_web_service_details_set_web_service_addresses ((FolksWebServiceDetails*) self, g_value_get_object (value));
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		break;
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		case FOLKS_BACKENDS_KF_PERSONA_ANTI_LINKS_PROPERTY:
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		folks_anti_linkable_set_anti_links ((FolksAntiLinkable*) self, g_value_get_object (value));
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		break;
#line 3546 "kf-persona.c"
		default:
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 31 "/run/build/folks/backends/key-file/kf-persona.vala"
		break;
#line 3552 "kf-persona.c"
	}
}


static void
_vala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void
_vala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}


static gint
_vala_array_length (gpointer array)
{
	int length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}



